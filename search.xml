<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>OMV安装IYUUAutoReseed</title>
      <link href="/2021/08/22/OMV%E5%AE%89%E8%A3%85IYUUAutoReseed/"/>
      <url>/2021/08/22/OMV%E5%AE%89%E8%A3%85IYUUAutoReseed/</url>
      
        <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>今年迁移了一下服务器的硬盘，30T左右的硬盘数据迁移成了我最头疼的问题，俗话说的话“一入PT深似海，从此硬盘没钱买”，因为今年硬盘价格的疯涨，造成我感觉多余的3块12T盘拆封了自用简直就是奢侈，所以还是消停拿出新腾出的2块4T来回输送整理数据，整理了整整一天。</p><p>本来今年的计划是逃离OMV，拥抱TrueNAS的。今年公司的Gitlab我也从公网迁移到了公司的内网服务器，选择的方案就是3块紫盘组的raidz1，其实raidz2是更好的方案，但是硬盘的价格你懂得，没有选择raid5也是为了要强上ZFS，ZFS不用多说，玩NAS和Linux的都知道，两个字：好用。不光Gitlab，开发的公共文件，前端的静态文件，设计人员的设计图我也分别开了NFS，SMB等，极大的提高了团队共享文件的效率。</p><p>而自己家里没有选择TrueNAS的原因无非就是上ZFS的成本实在太高，不用ZFS的话自然而然没必要强上TrueNAS了，所以还是老老实实用OMV，毕竟OMV对Docker支持的更好。</p><p>作为Pter，都饱受辅种的烦恼，A站下了一个资源，正好B站和C站还有D站也都有这个资源，所以只好去BCD站分别下载种子然后添加任务完成校验去辅种，这个过程真的太难熬，作为收割机的我想要的大站都已收入囊中，剩下的就是赚魔力积分了，早就听过IYUU自动辅种，今天就尝试下，记录下折腾的过程。</p><h1 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h1><p>先说方案，我的OMV是虚拟机直通HBA卡的方案，所以OMV的系统盘只分了30G，我不想在OMV跑太多的服务，毕竟它只是个NAS系统，跑文件服务足矣，为了PT，勉强上了Transmission，qBittorrent也是走docker的方案，数据盘全部挂在3T的缓存盘。</p><h1 id="折腾"><a href="#折腾" class="headerlink" title="折腾"></a>折腾</h1><p>其实IYUU的文档还是挺全的，感觉小白上手也就是5分钟，先ssh连到OMV，docker我之前早就安装好了，谷歌一下各种文档，开始我本想用docker-compose来的，结果看官方文档只是挂载了一个config.php的配置文件，就算了，先复制一份<a href="https://gitee.com/ledc/IYUUAutoReseed/raw/master/config/config.sample.php" target="_blank" rel="noopener">配置文件</a>，然后打开<a href="https://iyuu.cn/" target="_blank" rel="noopener">IYUU官网</a>申请<strong>IYUU令牌</strong>，微信扫一下即可，然后把<strong>IYUU</strong>令牌输到刚才复制的配置文件中<br><code>&#39;iyuu.cn&#39;        =&gt; &#39;你的IYUU令牌&#39;,</code></p><p>之后填写Transmission的配置中的用户名密码(qBittorrent配置同理不再赘述)。</p><p>PS：因为是docker部署，所以host中的127.0.0.1要改成你OMV的IP，不然启动会报错，这个玩过docker的童鞋应该都知道，简单解释就是如果还用127就是找容器自己，容器自己就是IYUU服务，Transmission是部署在宿主机的服务，这时候肯定连接不到，qBittorrent同理，只不过qBittorrent通过docker部署，然后把端口映射到宿主机。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">array</span>(</span><br><span class="line">                <span class="string">'type'</span>=&gt;<span class="string">'transmission'</span>,<span class="comment">// 支持：transmission、qBittorrent</span></span><br><span class="line">                <span class="string">'host'</span>=&gt;<span class="string">'http://192.168.0.11:9091/transmission/rpc'</span>,<span class="comment">// 警告！注意：transmission/rpc这段别动，你只需要修改 127.0.0.1:9091</span></span><br><span class="line">                <span class="string">'username'</span>=&gt;<span class="string">'你的用户名'</span>,     <span class="comment">// 没有用户名请填写null</span></span><br><span class="line">                <span class="string">'password'</span>=&gt;<span class="string">'你的密码'</span>,     <span class="comment">// 没有密码  请填写null</span></span><br><span class="line">                <span class="string">'BT_backup'</span> =&gt;  <span class="string">'/torrents'</span>,                        <span class="comment">// 移动做种：如果脚本与当前客户端不在一台机器，必须配置</span></span><br><span class="line">                <span class="string">'move'</span>      =&gt;  <span class="number">0</span>,      <span class="comment">// 0不移动，1移动并辅种，2移动且只在当前客户端辅种</span></span><br><span class="line">            ),</span><br></pre></td></tr></table></figure><p>最后填写各站点的用户id(不是每个站都需要)和passkey，passkey去各站的控制面板就可以找到</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'ourbits'</span>      =&gt; <span class="keyword">array</span>(</span><br><span class="line">        <span class="comment">// 如果需要用下载免费种脚本，须配置（只是自动辅种，可以不配置此项）</span></span><br><span class="line">        <span class="string">'cookie'</span>        =&gt; <span class="string">''</span>,</span><br><span class="line">        <span class="comment">// 如果需要自动辅种，必须配置</span></span><br><span class="line">        <span class="string">'passkey'</span>       =&gt; <span class="string">'你的Passkey'</span>,</span><br><span class="line">        <span class="string">'id'</span> =&gt; 你的用户ID,<span class="comment">// 用户ID(不是用户名)</span></span><br><span class="line">        <span class="string">'url_replace'</span> =&gt; <span class="keyword">array</span>(),</span><br><span class="line">        <span class="string">'url_join'</span> =&gt; <span class="keyword">array</span>(</span><br><span class="line">            <span class="comment">//'ipv6=1',   // 种子Tracker的IP地址选择 可选：ipv4，ipv6</span></span><br><span class="line">            <span class="comment">//'https=1',</span></span><br><span class="line">        ),</span><br><span class="line">        <span class="string">'limitRule'</span> =&gt; <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">'count'</span> =&gt; <span class="number">20</span>,      <span class="comment">// 每次辅种20个</span></span><br><span class="line">            <span class="string">'sleep'</span> =&gt; <span class="number">15</span>,      <span class="comment">// 最少休眠15秒</span></span><br><span class="line">        ),</span><br><span class="line">        <span class="string">'workingMode'</span>=&gt; <span class="number">0</span>,</span><br><span class="line">        <span class="string">'watch'</span>         =&gt; <span class="string">'/root/downloads'</span>,</span><br><span class="line">        <span class="string">'filter'</span> =&gt; <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">'size'</span>=&gt;<span class="keyword">array</span>(</span><br><span class="line">                <span class="string">'min'</span>=&gt;<span class="string">'1GB'</span>,</span><br><span class="line">                <span class="string">'max'</span>=&gt;<span class="string">'280GB'</span>,</span><br><span class="line">            ),</span><br><span class="line">        ),</span><br><span class="line"></span><br><span class="line">    ),</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p>然后执行下面的命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">--name IYUUAutoReseed \</span><br><span class="line">-e cron=<span class="string">'0 9 * * 0'</span> \</span><br><span class="line">-v /yourpath/IYUU/config.php:/config.php \</span><br><span class="line">--restart=always \</span><br><span class="line">iyuucn/iyuuautoreseed:latest</span><br></pre></td></tr></table></figure><p>PS：yourpath就是你刚才复制的config.php的存储路径。</p><p>执行完成后通过<code>docker logs -f  IYUUAutoReseed</code>查看log即可。</p><p>此时你去登录Tr和qB的界面就可以看到各种等待校验的种子，再也不用手动辅种了。当然有些转发的种子改了下载文件的目录结构或者文件名，这就很伤，所以在校验结束之前还是时不时看一眼进度，到时候数据超标就不好了。</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>以上就是OMV安装IYUU的记录，至于为什么没有用IYUU Plus等带有web界面的镜像，其实主要就是因为多年以来的开发习惯，总觉得命令行比网页更直观地定位问题，而且单纯的IYUU也更节省系统资源的占用。</p>]]></content>
      
      
      <categories>
          
          <category> PT </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PT,IYUU </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2020年终总结</title>
      <link href="/2021/02/24/2020%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"/>
      <url>/2021/02/24/2020%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>很多小伙伴有一种2020年怎么什么还都没做就忽然要说再见了，也有人说2020年虽然是进10年来最差的一年确实未来10年最好的1年，虽然我也这么想，但是作为一个码农，我能做的似乎就只有好好写代码，然后等着35岁被优化了。</p><p>照旧，一年一度的年终总结，每年都是这个时候我会连续好几天睡得很晚，复盘这一年我做了什么事，有什么事是有价值的，如果相较于去年是有进步的，那么，足矣。</p><p>首先回顾下2020年的关键词，一定是“疫情”，本以为它会像03年非典一样过了夏天就离大家远去，事与愿违的是临近年底它有回来了，很多同学的薪资和年终奖都受到了一定的影响，尤其是对比了米哈游和莉莉丝的年会奖品，真的应了那句话——杀伤力不大，但侮辱性极强。对于这些只要平常心看待就好了，毕竟只要自己相较于去年有了新的进步，就是给自己最好的年终奖了。</p><p>2020年，我自己的关键词有“摆摊”和“智能”。</p><p>之所以会摆摊是因为母上大人七八年前店铺的一些积压货源一直没有处理，再加上我手里掌握了一些货源渠道可以很便宜的买到大家生活中的常用的生活用品和零食等，又有地摊经济的刺激，我决定利用周末时间“下海经商”。我所在的大“二线”城市有个奇葩的设定，那就是城管比小贩还多，为了避免跟城管人员的正面冲突，我选择了自己家小区门口，而且是周末的下午三四点钟，适逢一些家长接送补习班孩子的时间，所以零食类还算畅销，仅仅两个多小时候就入账了三四百，远远超过我的预计，清楚的记得第二天下午三四点我刚在门口摆了一点点，不到10分钟就围上了10多个买东西的人，10分钟不到就200多块入账，更加坚定我放下面子来摆摊是正确的决定，就在这时，善解人意的城管小哥哥就来了，态度还算和善让我们赶紧收了，我们就收了，等他走后再次摆了出来，毕竟我东西搬进小区门你就管不到我了，一切照常，再次围上购买的人后城管小哥哥就又回来了，看来他们是一副要跟我死磕到底的节奏啊，他还没下车我们就把东西搬到小区门里面了，周围其他摆摊的小哥哥也在几秒钟之内就跑掉了，你别说，这感觉还真刺激，毕竟是第一次被城管追，当天晚上必须奖励自己来一顿涮锅压压惊😀，后续几乎每个周末都是在和城管的斗智斗勇中度过，在跟周围摆摊的小贩交流后我更是发现：竟然很多都是跟我一样，周一到周五上班，周末兼职摆摊的，不同的是他们已经很城管斗智斗勇多达几年，所以听他们分享躲避城管经验的时候那种胜利的感觉，我感觉生活真的远比我以前想的有意思的多。</p><p>摆摊体验过后突发奇想要去追集，早晨五点就起床装车，天还没亮就前往赶集的地点，头天晚上更是足了准备工作，拿出我买华为云服务器送的蓝牙音箱，再给充电宝充满电，手机录上一段促销语音，果不其然，我们成了那条街最靓的仔，小音箱和促销语音的加持让我们的摊位成了那趟通道生意最火的摊位，很多常摊主都说你们第一次来就卖的最好真行啊，虽然东西卖得还凑活，但是我媳妇手机被小偷给偷了😂，所以赶集要谨慎啊，扒手真的多。</p><p>不管是摆摊还是赶集，除了卖东西最有意思的就是跟周围的小贩一起交流，真的跟打开了新世界的大门一样，让我觉得生活还能这样，有夫妻俩为了孩子全年无休，看他们提起自己孩子时那骄傲的笑容别提有多灿烂了，也有为了几块钱讨价还价的大妈却花了几百块几乎把你的东西包圆了，总之就是能看到跟码代码完全不一样的生活，满满的烟火气。</p><p>摆摊赚了点钱，不花掉怎么行，看着之前的智能家居改造只进行了一半，小米又众筹了智能开关插座的蓝牙方案，不用ZigBee正合我意，果断的入手，三开99元，双开69元，单开59元，一买就是将近十个，小爱的触屏音箱也是时候升级到Pro8了，再加上没开封的第一款小爱Ai音箱，真正实现了客厅、卧室、厨房都能被语音控制的场景，配合智能空调伴侣和万能遥控器，在加上温湿度传感器，灯具都换成了Yeelight，基本这一套就差不多了，又在PDD买了几个智能开关解决定时自动上电和断电。嗯，完美，但是总感觉还差点什么，琢磨来琢磨去就是WiFi6协议的AP，年前家里的WiFi6设备真的不多就一直搁置，但是2020年的新设备已经都支持了WiFi6了，所以这件事必须提上来日程，鉴于大“二线”城市被某宝和PDD的快递限制，只能等年后了，留给7650小音箱的时间不多啦。</p><p>就玩这些当然不行，智能家居让你越来越懒，但是为了健康还得运动啊，Switch健身环走起，Oculus Quest2走起，说是为了玩，其实也是为了减肥，居家办公期间涨了十几斤肉就没在掉下去过，尤其Quest2真的是墙裂推荐，之前用三星S7E的时候买过Gear VR，看过几次电影就吃灰了，直到Quest2一体机发布，我就知道现在是时候买真正的VR设备了，Beat Saber我来了。Quest2的唯一门槛就是激活，但是对于码农来说是小Case，官方Demo做的非常牛，Beat Saber不用插线，Virtual Desktop只要不到20刀就能串流Windows上的游戏，同时支持Steam VR，配合SkyBox VR Player看NAS里的电影，就是自己包了场IMAX，RX588太拉胯带不起半条命Alyx是今年一大遗憾，主要是30系显卡太难抢了，所以只能等2021年了。</p><p>作为码农，光玩怎么行呢，持续进步才是该有的职业素养，可惜今年的新技术貌似也少些，中台概念又被多个大厂叫停，Service Mesh在国内也一直不温不火，那么玩啥呢？不知道大家有没有经历过你跟朋友刚聊完XX产品，过一会某度某宝某多某东就全是这类产品的推送，很明显是大数据在作祟，这种应用场景虽然我很不喜欢，但是还得学，学完用在正道上，要不没法安身立命，没法在职场保持竞争力。久违的Spark开始映入脑海，查资料的时候又看到了Flink，然后无情抛弃了Spark，开始了Flink的学习，配合MongoDB，ES分词，难度还算可以接受，不过估计到了实际的使用场景，会有很多的坑需要填，这些就留到以后吧。</p><p>今年还做了一件事，就是把项目的构建从Maven升级到了Gradle，毕竟Spring官方都这么搞起了，咱也得紧跟步伐，有之前做安卓的背景在，配合Groovy脚本无压力，但是现在主流变成了Kotlin Script，有些配置语法还是改了，完整的把之前的Maven项目迁过来还是费了一番力气的，因为懒，很多东西都是直接谷歌，没有答案，谷歌搜英文，没有答案，最后被迫看英文文档，果然，所有问题都迎刃而解，同时不得不感叹Gradle和Spring的官方文档真的赞，基本你遇到的问题都有写到，技术人做事始终还得稳扎稳打，冒进只会浪费更多的时间。</p><p>今年还大胆尝试了之前不擅长的前端，疫情期间行程码健康码都是小程序，社区团购又助力了一把，所以就跟风看了看小程序，选的是uni-app方案，组件炒鸡多，但是文档少的可怜，看一两个小时基本能写，但是编写边查边搜真的很慢😂，这个真的是积累的问题了，还有就是有些细节不找前端看还真的做不出来，但是敢于尝试也算进步🐶</p><p>2021年呢，希望世界和平，疫情赶紧过去，希望所有的小伙伴都升职加薪，同时希望所有人都健健康康。</p>]]></content>
      
      
      <categories>
          
          <category> 生活职场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 程序猿,地摊,技术 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>物理服务器该怎么玩</title>
      <link href="/2020/05/03/%E7%89%A9%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%A5%E6%80%8E%E4%B9%88%E7%8E%A9/"/>
      <url>/2020/05/03/%E7%89%A9%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%A5%E6%80%8E%E4%B9%88%E7%8E%A9/</url>
      
        <content type="html"><![CDATA[<p>2019年，get了Kubernetes，get了Flutter，get了新的workflow……</p><p>然后2020就开始了，和大部分来自于码农的Geek一样，我们是不折腾就不舒服的群体。</p><p>去年玩的跟硬件搭边的似乎只有基于树莓派4群控大屏和万能遥控器的合体项目，我清楚的记得疫情期间程序猿圈子里各种淘换设备来玩，我自然也是动了心思。思索了许久，感觉家里的HP MicroServer Gen8似乎已经稳定服务2年了，堪称理财产品的它似乎只有最高16G内存这个缺点了。开始本来想来一套华南双路x79来玩玩的，但是转念一想我为何不直接淘个洋垃圾服务器呢，反正都是7x24h运行，服务器怎么都比寨板稳定，又碰上正好有一个大佬在安利HP DL380P G8，其实也是Gen8，不过我现在家里的是微服务器，而这个DL380P是2U的机架式。关于声音的问题可以通过扔阳台来解决。</p><p>说干就干，定好了两颗e5 2630l，32G内存(本来想64的，但是REG ECC跟着普通内存一起瞎起哄涨价，只能先买32，后续降价了再买32G)，这样基本就满足了我开虚拟机的需求了，下单后第二天到货，疫情期间快递统一小区东门，距离我家走路七八分钟，本来寻思放电动车踏板就能带回家，结果根本放不下，只能让我妈扶着箱子，我推着车带回了家。</p><p>然后就开始了折腾之路，跟家里之前的gen8一样，系统装在TF卡(其实gen8是sd卡)，在把ODD SATA转成普通SATA接一个2.5寸的硬盘用3M胶粘在电源壳的铁皮上😂，前面板硬盘笼的12个盘位全部放3.5普通硬盘，当然我并没有那么多硬盘😢。硬件基本就这样；接下来是软件，因为之前的Gen8用的是ESXi，所以这次想玩玩Proxmox VE(后面简称PVE)，因为现在东西还没到齐，所以先找个内存卡装个ESXi尝尝鲜。</p><p>先是老路子去惠普官网下载专用的ESXi的iso，最新的是6.7 U3，安装的时候直接卡死，我以为机器有问题，然后马上换6.7 U2，可以成功，不禁想难道是BIOS版本太旧了，咨询大佬后建议我先装个win server然后升级下服务器的各个固件，至于为啥需要用win升级固件，因为惠普官网都是酱婶的，只有极个别的固件版本支持Linux安装。一顿操作猛如虎的升级固件后，继续安装U3，同一个位置，同样的卡死😂，此时内心已崩溃，睡觉，翌日再战。</p><p>第二天新的32G的TF卡到了后，开始折腾PVE，官网下载镜像，写入优盘(写入优盘后跟其他系统不一样，win下会让你格式化，不用理，直接安全退出优盘拔出即可)，安装步骤就不赘述了，实在是太简单了，安装完成一次点亮，进入web管理页面开始安装OMV，为啥安装OMV，因为打算12个硬盘位全部直通给OMV，然后通过OMV创建各种文件系统给其他系统使用，想法总是美好的，但是现实总会给你一记重击，重击是什么呢，就是按照PVE官网设置阵列卡直通死活不成功，既然阵列卡不行我就试试网口直通吧，同样的命令，同样的错误，谷歌英文搜索后有国外大佬说是HP的新固件做了限制，要想直通请降回历史版本的固件，但是这个历史版本到底是哪个版本，大佬没写😂，难不成我要每次都装回win，然后换固件，再装PVE，再直通……内心再度崩溃，睡觉，翌日再战。</p><p>翌日，就在查资料和折腾的过程中，PVE报了个eof error，猜测是存储配置在SD 卡造成的问题，最终得出结论，PVE不适合安装在TF卡，看来还得换回ESXi，在装完6.7 U2后，突然想到由于我的硬盘有4T有12T有1T更有500G的，这种复杂的搭配不适合组raid，所以需要转换为HBA Mode再直通，在上网找了p420i如何强开HBA Mode后就去尝试直通p420i给OMV，此时，只听到服务器的风扇瞬间飙到满速，几秒钟后自动重启了，再次尝试后问题依旧，谷歌查不到答案，用英文搜索同样查不到，但是却查到了p420i直通后CPU占用100%的问题，CPU占用100%意味着啥，那就是风扇要满速运行，新的固件很可能会自动重启，此路不通，内心再度崩溃，再决定买真正的HBA卡后，睡觉，来日再战。</p><p>为了赶紧折腾，特意找了个北京的深水宝店家，报价比其他几家贵50块，很多外地商家还无货，没办法只能加钱了，第二天就到货了，拆开服务器，把p420i的供电拆下来后在PCI槽上插上了新到的HBA卡，开机直通，一切顺利，完美，此时眼泪已在眼睛里打转，内心一直回放着：“我太难了！”。紧接着尝试网口直通，同样完美。此时不知道为啥我非要去惠普官网看看，还偏偏无意间看到了官网更新了ESXi 7.0的镜像，我的天，我刚搞定完直通，你就更新了新的系统镜像，手没忍住点了下载，然后写入优盘，重装系统……这次我就鸡贼了，我换了一张TF卡，如果7.0不好用，我换回之前的6.7的卡就好了，结果7.0装完OMV直通后的磁盘速度还真是比6.7要快，机智的我再一次被自己的机智打败了，因为7.0装在了性能比较差的SD转TF卡，而6.7装在了性能更好的TF卡上，既然7.0使用体验还不错，那就把7.0装在TF上吧，于是拆机，换卡，重启，装系统……此时想要实现的东西都已测试完毕，睡觉，等明天规划好功能在动手。</p><p>功能规划和功能实现同样重要的，所以换了一套跟gen8不一样的方案，网络规划是光猫连接iKuai，iKuai直通一个网口作为wan口，二级路由依旧openwrt，用来全局去广告和国外查资料，剩余两个网口直通给openwrt，其中一个连接交换机，然后用爆款小音箱TP link 7650组mesh实现5G WiFi全覆盖(别问我为啥不一步到位上WiFi6的AP，因为没钱啊😂，而且手里也没有WiFi6的设备，而且说实话1300M的无线速率其实已经妥妥够了，等后面万兆交换机和WiFi6普及后再换不晚)，最后剩余的一个物理网口用来做ESXi的管理口；功能规划是所有硬盘位直通给OMV，然后OMV通过nfs和Samba共享给NAS和WIN10，其中NAS主要用来PT和电视投影用来观影，WIN10主要用来通过远程桌面来使用百度网盘和迅雷(基本上等同于废物一个了)，然后再来一个Ubuntu和Centos用来编译项目和玩耍，其实凑够64G内存后用来组Ceph和k8s一起玩耍也是不错的选择，不过k8s还是留给工作中用吧，生活里需求确实不大。</p><p>至于为啥选择OMV，因为之前gen8的硬盘走的是RDM，这种方式虽然可以发挥出硬盘的99%的性能，但是会造成硬盘无法休眠，无法获取硬盘的SMART信息，而真正的直通就可以避免这个问题，至于为啥不直接把硬盘直通给NAS，是因为NAS提供出去的NFS和Samba服务会造成磁盘速度无法跑满，这一点我在矿渣蜗牛星际中也得到了验证。而且OMV支持直接查看硬盘的SMART信息，可以开启休眠，还可以通过插件获得ZFS，好像也可以选择固定的硬盘来组软raid。可能有人说OMV其实就是NAS系统了，为啥还要再弄个NAS系统了，其实主要就是为了手机app可以备份和查看资源，而且服务器确实资源过剩😃，多开一个系统完全无所谓。</p><p>以上就是2020开年的All in one的新方案，总结起来就是：洋垃圾虽然便宜，但是没有一定的折腾能力还是谨慎购买，当然折腾完之后就什么都不用管了也是巴适得很。如果父母在家用网的话，最好做个灾备措施，万一服务器出了问题宕机了家里的网络自然会瘫痪，所以我把家里的网件路由器设置成和AP同SSID，一旦服务器宕机断网，父母只要把网件路由器的电源插上，然后光猫的网线接到路由器的wan口即可临时恢复网络。</p><p>截止到本文结束，服务器已经丢在阳台稳定运行一个多月，除了吸尘，噪音还能接受，等手头富裕了买个机柜，体验还能提升一个档次。</p><p>PS：HP GEN10 Plus已经上线，体积更小，性能更高，同时解决了gen8诟病的风扇声，最高64G内存，家用完全足够，如果资金允许，墙裂推荐购买。</p>]]></content>
      
      
      <categories>
          
          <category> 生活职场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 程序猿,服务器,all in one </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019年终总结</title>
      <link href="/2020/03/06/2019%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"/>
      <url>/2020/03/06/2019%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>2020年在快到来的时候就已经注定了不平凡，让肺炎这个词在2003年非典之后再次成了年度热词，一场战役不知掏光了多少家餐饮娱乐业，多个公司降薪裁员也一定让大家意识到了充实自己能力的重要性。</p><p>我一直认为程序猿本身就是一个要不断学习总结的职业，不然的话做前端就是一辈子的UI Boy，而做后端就是一辈子的CURD Boy。</p><p>接下来就回顾下2019年，要说2019年最大的事莫过于开始接触SaaS，采用微服务架构，跟我之前经历刚好吻合，不同的是这次主要的工作重点不是业务，而是框架搭建和出解决方案，主要是负责封装一些通用的module来简化后端同学的开发工作，所以当后端团队的业务标准化后就带来了一些问题，如何管理这些通用模块，总不能每次都要同事去拉项目源码然后自己执行mvn install吧，为了解决这个问题就引入了<a href="https://jfrog.com/artifactory/" target="_blank" rel="noopener">Artifactory</a>，为什么没有选择Nexus就不赘述了，毕竟Artifactory很好很强大，还能顺便解决npm和pod私服，虽然中文资料不多，但是摸索一下你会发现真香。</p><p>我们的业务是<a href="https://kubernetes.io" target="_blank" rel="noopener">Kubernetes</a>部署的，这个名词以前只是听说过，知道它是为微服务而准备的以及和docker有密不可分的联系之外我就什么都不知道了，为了了解k8s我还买了一本厚厚的《Kubernetes权威指南》，通过哪里不会点哪里的查字典模式摸透了k8s服务编排的思路，同时也了解了国内的书机翻的比例真是大到你无法想象，一些关键字竟然给你翻译成中文……</p><p>要说程序员如何很快的掌握一门技术，最好最快的方法就是直接写代码，所以手写yaml(json也可以)配置文件无疑是锻炼自己理解k8s最好的方式。先是从Pod，Deployment，Service，StatefulSet，ConfigMap等一点点学习到最后组合在一起，对整体的服务编排就有了清晰的认知，后来因为Ingress奇妙的使用感受又让我不得不去了解下，于是traefik这个东东就进入了我的学习视线，官方文档虽然全是英文但是必须承认真的写得太好了，一步一步跟着来就能一路绿灯。之后又因为数据需要持久化又顺便学到了PV，PVC和NFS搭配，当然也少不了搭建k8s环境时学到的Master和Node，这些基础都了解之后，k8s的概念就深深印在脑子里了，如果你以为这些都了解了之后就万事大吉了，那你真是图样图森破，因为还有<a href="https://helm.sh/" target="_blank" rel="noopener">Helm</a>要学习😂，好在学完之后你会发现什么部署redis-ha，mongodb-ha，rabbit-ha等之类的都是浮云。当然学k8s这么快不得不感谢<a href="https://nacos.io" target="_blank" rel="noopener">Nacos</a>这个项目，因为我们的项目从Eureka迁移到了Nacos，就是在搭建Nacos高可用的时候get到了StatefulSet和Replication Controller，从此你会发现弹性伸缩是这么的easy。而且在跑官方的nacos-k8s样例时发现了一些问题，反馈到官方群里，现在已经得到了解决。</p><p>2019年要是光get了k8s，那就太寒碜了。移动端开发人员都知道闲鱼是国内首先吃Flutter这个螃蟹的团队，我们正好有个项目也在调研，于是就有了混合开发的预案，方向是项目分两个模块，其一是Native模块，负责即时通讯，推送等适合原生的功能模块；其二是Flutter模块，负责一些通用的页面展示和信息的提交；同时要求Native模块和Flutter模块均可独立运行，然后Flutter项目作为依赖来打正式包。国内最纯熟的方案就是闲鱼团队开源的flutter_boost，在调研完毕后我就写了Android和iOS的Demo，实现了原生和Flutter页面的相互跳转和传参。我本身不是iOS开发，所以在做iOS的demo的时候顺便学习了一些好玩的东西，比如打包iOS的Framework作为Pod依赖供iOS开发使用。Android自然不必说了，肯定是打包AAR然后原生项目依赖这个AAR即可，唯一的难点就是Flutter打包后会生成多个AAR，每次都去覆盖不是标准的程序员该做的事，业界的通用方案就是far-aar，在上网了解了一些资料后通过shell脚本也解决了。最后iOS和Android开发即可通过Artifactory私服来依赖framework和aar了，再配上持续集成，基本就符合标准的流程了。😁</p><p>既然采用了Flutter，自然就预估了一些风险，但是让我万万没想到的是风险远远超过了我的预估。再加上项目分移动端和平板端，不作(读一声)不开心的我自然选择了以前没玩过的平板端。本来跟我们合作的后端团队都是巡检报表写死，但是产品的需求又是后面肯定会改动报表的内容，这让我怎么能忍，一个报表一个页面要让前端写到猴年马月了，于是在论战了几个回合之后终于按我的提议改成了动态表单，本地要存动态表单自然少不了ORM，然而我选型的最适合本项目的ORM框架是基于Lua的plugin，作者提供的native库没有x86架构😭，更“幸运”的是为了调试而采购的平板只有一台，所以我用平板调试的时候，其他同事就只能用Genymotion模拟器，没有x86的库就意味着模拟器跑项目必然会崩溃，心有不甘的我拉下作者项目的源码后发现作者的makefile把x86相关的全部注释掉了😂，我打开注释后用ndk编译才发现各种报错，最后终于凭借之前编译构建的经验把问题一个个解决，然后把编译好的产物发布到了dart pub上，这样大家就不用每次都依赖项目了。ORM解决了就是动态表单了，说实话虽然是我提议的动态表单，但是我也是仅仅在native上有自信能搞定，作为新手的我用flutter渲染动态表单UI我也不是很自信，好在正好跟iOS的同事打了个赌说我自己肯定能做出来，最后终于没食言还是搞定了，估计那天晚上睡觉做梦都是笑着的😂。</p><p>除了以上这些其实还折腾了一些后端的东西和树莓派相关的项目，在这就不一一列举了。</p><p>我的2019年还是跟往年一样很充实，因为工作的充实导致业余生活的项目没啥可以说的，几乎是0😂</p><p>总之对于2019年的成果我还是很满意的，这份满意少不了家人的理解和公司领导的支持，当然也少不了我带领的7个小朋友的配合。</p><p>2020年，希望疫情赶紧过去，让大家都回归到正常的生活节奏。Go Go Go!</p>]]></content>
      
      
      <categories>
          
          <category> 生活职场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 程序猿,修养,修炼 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>编译构建总结</title>
      <link href="/2019/04/06/Makefile%E6%80%BB%E7%BB%93/"/>
      <url>/2019/04/06/Makefile%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>​    最近一个月都在忙气象模型相关的应用，例如mm5，WRF，CMAQ等，因为需要在天河超算上运行，普通用户又没有sudo权限，所以就只能自己动手编译了。这些应用都是开源的，且大多采用Fortain语言编写，折腾了一段时间自然要记录一下。</p><h1 id="概念介绍"><a href="#概念介绍" class="headerlink" title="概念介绍"></a>概念介绍</h1><h2 id="make-说白了就是一个编译命令"><a href="#make-说白了就是一个编译命令" class="headerlink" title="make (说白了就是一个编译命令)"></a><a href="https://zh.wikipedia.org/wiki/Make" target="_blank" rel="noopener">make</a> (说白了就是一个编译命令)</h2><p>在<a href="https://zh.wikipedia.org/wiki/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91" target="_blank" rel="noopener">软件开发</a>中，<strong>make</strong>是一个工具程序（Utility software），经由读取叫做“<a href="https://zh.wikipedia.org/wiki/Makefile" target="_blank" rel="noopener">makefile</a>”的文件，<a href="https://zh.wikipedia.org/wiki/%E8%87%AA%E5%8B%95%E5%8C%96%E5%BB%BA%E6%A7%8B" target="_blank" rel="noopener">自动化建构</a>软件。它是一种转化文件形式的工具，转换的目标称为“target”；与此同时，它也检查文件的依赖关系，如果需要的话，它会调用一些外部软件来完成任务。它的依赖关系检查系统非常简单，主要根据依赖文件的修改时间进行判断。大多数情况下，它被用来<a href="https://zh.wikipedia.org/wiki/%E7%BC%96%E8%AF%91" target="_blank" rel="noopener">编译</a><a href="https://zh.wikipedia.org/wiki/%E6%BA%90%E4%BB%A3%E7%A0%81" target="_blank" rel="noopener">源代码</a>，生成<a href="https://zh.wikipedia.org/wiki/%E7%9B%AE%E6%A0%87%E4%BB%A3%E7%A0%81" target="_blank" rel="noopener">结果代码</a>，然后把结果代码连接起来生成<a href="https://zh.wikipedia.org/wiki/%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6" target="_blank" rel="noopener">可执行文件</a>或者<a href="https://zh.wikipedia.org/wiki/%E5%BA%93%E6%96%87%E4%BB%B6" target="_blank" rel="noopener">库文件</a>。它使用叫做“makefile”的文件来确定一个target文件的依赖关系，然后把生成这个target的相关命令传给shell去执行。</p><h2 id="Makefile-（说白了就是编译的配置文件）"><a href="#Makefile-（说白了就是编译的配置文件）" class="headerlink" title="Makefile （说白了就是编译的配置文件）"></a><a href="https://zh.wikipedia.org/wiki/Make#Makefile" target="_blank" rel="noopener">Makefile</a> （说白了就是编译的配置文件）</h2><p>一个工程中的源文件不计其数，其按类型、功能、模块分别放在若干个目录中，makefile定义了一系列的规则来指定，哪些文件需要先编译，哪些文件需要后编译，哪些文件需要重新编译，甚至于进行更复杂的功能操作，因为 makefile就像一个<a href="https://baike.baidu.com/item/Shell%E8%84%9A%E6%9C%AC" target="_blank" rel="noopener">Shell脚本</a>一样，其中也可以执行操作系统的<a href="https://baike.baidu.com/item/%E5%91%BD%E4%BB%A4/8135974" target="_blank" rel="noopener">命令</a>。</p><h2 id="宏-说白了就是编译环境的环境变量"><a href="#宏-说白了就是编译环境的环境变量" class="headerlink" title="宏 (说白了就是编译环境的环境变量)"></a><a href="https://zh.wikipedia.org/wiki/Make#%E5%B7%A8%E9%9B%86" target="_blank" rel="noopener">宏</a> (说白了就是编译环境的环境变量)</h2><p>“宏”指的是用一个字符串代替另一个字符串的功能。在makefile中可以使用“=”号来定义宏，使用“$（宏名）”来使用宏；还可以用“+=”追加宏的内容。习惯上，宏名使用大写。例如CC、CXX、FC、FCFLAGS等。</p><p><strong>宏基本上在你做编译和移植主要修改的参数，因为大部分应用都把这里处理的很不错。</strong></p><p>一般我们可以通过环境变量设置，或者在执行<code>./configure</code>命令后跟上相应的配置，例如下面的命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure CC=icc FC=ifort<span class="comment">#将CC和FC的编译命令指定为icc和ifort</span></span><br></pre></td></tr></table></figure><h1 id="编译器介绍"><a href="#编译器介绍" class="headerlink" title="编译器介绍"></a>编译器介绍</h1><p>网上的教程大多采用GNU的gcc和g++以及gfortran等，也有少部分资料采用intel的编译器，intel的编译器经过我的测试要比GNU系列的编译速度快，并且基本上每年每个季度都会更新，当然也是收费的，不过学生和开源项目的参与者可以免费获取一年的license，具体步骤我就不在这里叙述了，网上有很多资料。</p><p>下表是GNU和INTEL的命令对照，设计到MPI的部分这里不做介绍</p><table><thead><tr><th>GNU</th><th>INTEL</th></tr></thead><tbody><tr><td>gcc</td><td>icc</td></tr><tr><td>g++</td><td>icpc</td></tr><tr><td>gfortran</td><td>ifort</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 编译构建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Makefile,编译,构建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter入坑</title>
      <link href="/2019/02/13/Flutter%E5%85%A5%E5%9D%91/"/>
      <url>/2019/02/13/Flutter%E5%85%A5%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<p>作为一名有追求的开发人员，关注前沿动态是基本的职业素养之一，Flutter目前趋于稳定，是时候入坑了。</p><p>Flutter的环境搭建的文章网上多的不能在多了，我就不一一赘述了，最好的文档就是官方，<a href="https://flutter.io/docs/get-started/install/macos" target="_blank" rel="noopener">Mac OS环境搭建文档</a>。需要科学上网，不过国内有加速镜像，请自行谷歌百度。</p><p>环境搭建完毕在终端输入<code>flutter doctor</code>后稍等一会儿，如果出现如下界面代表成功了(如果不需要iOS环境，iOS toolchain可以选择不安装，Android Studio和IDEA的Flutter的插件安装你肯定会)</p><p><img src="/2019/02/13/Flutter入坑/flutter/1.png" alt="安装成功"></p><p>下面就是挖坑过程，我的Android Studio在安装完Flutter插件后竟然没有创建Flutter项目的选项，虽然可以通过<code>flutter create your_package_name</code>(注意<strong>小写</strong>和<strong>下划线</strong>链接)，但是强迫症受不了啊，最后终于在<a href="https://stackoverflow.com/questions/49405321/new-flutter-project-wizard-not-showing-on-android-studio-3-0-1/52671156" target="_blank" rel="noopener">stackoverflow</a>找到思路，上面的回答无外乎卸载和重新安装Flutter插件以及必须按一定顺序来操作，但是我早就试验过，根本行不通，当看到一个回答说是启用所有AS的插件后重启即可，我马上打开插件列表，选择Disabled的插件，果然看到了<strong>Android APK support</strong>这货，enable这个插件后重启，终于有了创建Flutter项目的选项了。</p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android开发Tips</title>
      <link href="/2018/12/02/Android%E5%BC%80%E5%8F%91Tips/"/>
      <url>/2018/12/02/Android%E5%BC%80%E5%8F%91Tips/</url>
      
        <content type="html"><![CDATA[<p>我们在开发Android应用的时候经常会遇到一些小问题，为了不让这些小问题浪费你的时间，最好还是记录下，毕竟Time is money.</p><p>下面是我遇到的一些简单的问题，我会持续更新，算是一些Tips：</p><ul><li><p>给view的background设置selector不生效，因为selector的匹配规则是从上而下，所以我们应把<strong><em>state_pressed</em></strong>和<strong><em>state_selected</em></strong>等属性为<strong><em>ture</em></strong>的情况放在最前面，如果没有给view设置OnClickListener的话一定要给view设置clickable属性为true</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/ic_all_selected"</span> <span class="attr">android:state_selected</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/ic_all_selected"</span> <span class="attr">android:state_pressed</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/ic_all_unselected"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>给TextView或者EditText设置<strong>setCompoundDrawables</strong>时，记得给Drawable对象<strong><em>setBounds</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Drawable drawable = getResources().getDrawable(R.drawable.ic_add);</span><br><span class="line">drawable.setBounds(<span class="number">0</span>, <span class="number">0</span>, drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight());</span><br><span class="line">textview.setCompoundDrawables(drawable, drawable, drawable, drawable);</span><br></pre></td></tr></table></figure></li><li><p>当View的<strong>maxWidth</strong>和<strong>maxHeight</strong>属性不生效时，不妨试试设置<strong>adjustViewBounds</strong>的属性为<strong><em>true</em></strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/img"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:maxWidth</span>=<span class="string">"100dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:maxHeight</span>=<span class="string">"100dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:adjustViewBounds</span>=<span class="string">"true"</span>/&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>当我们用Fragment嵌套Fragment时，同时Fragment又搭配ViewPager显示内容，会出现内层的Fragment的ViewPager不显示UI或者只显示第一页的问题，其实是因为Activity嵌套Fragment使用ViewPager时应该用<strong><em>getSupportFragmentManager()</em></strong>作为PagerAdapter实例化的参数，而当Fragment嵌套Fragment使用ViewPager时应该用<strong><em>getChildFragmentManager()</em></strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MyPagerAdapter adapter = <span class="keyword">new</span> MyPagerAdapter(getActivity().getSupportFragmentManager());<span class="comment">//❌错误</span></span><br><span class="line">MyPagerAdapter adapter = <span class="keyword">new</span> MyPagerAdapter(getChildFragmentManager());<span class="comment">//✔️正确</span></span><br></pre></td></tr></table></figure></li><li><p>当设计同学给的<strong><em>透明度</em></strong>标注是百分比而不是16进制的时候，总要自己去手动算，所以我找了下表一一对应</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">100% — FF </span><br><span class="line">99% — FC </span><br><span class="line">98% — FA </span><br><span class="line">97% — F7 </span><br><span class="line">96% — F5 </span><br><span class="line">95% — F2 </span><br><span class="line">94% — F0 </span><br><span class="line">93% — ED </span><br><span class="line">92% — EB </span><br><span class="line">91% — E8 </span><br><span class="line">90% — E6 </span><br><span class="line">89% — E3 </span><br><span class="line">88% — E0 </span><br><span class="line">87% — DE </span><br><span class="line">86% — DB </span><br><span class="line">85% — D9 </span><br><span class="line">84% — D6 </span><br><span class="line">83% — D4 </span><br><span class="line">82% — D1 </span><br><span class="line">81% — CF </span><br><span class="line">80% — CC </span><br><span class="line">79% — C9 </span><br><span class="line">78% — C7 </span><br><span class="line">77% — C4 </span><br><span class="line">76% — C2 </span><br><span class="line">75% — BF </span><br><span class="line">74% — BD </span><br><span class="line">73% — BA </span><br><span class="line">72% — B8 </span><br><span class="line">71% — B5 </span><br><span class="line">70% — B3 </span><br><span class="line">69% — B0 </span><br><span class="line">68% — AD </span><br><span class="line">67% — AB </span><br><span class="line">66% — A8 </span><br><span class="line">65% — A6 </span><br><span class="line">64% — A3 </span><br><span class="line">63% — A1 </span><br><span class="line">62% — 9E </span><br><span class="line">61% — 9C </span><br><span class="line">60% — 99 </span><br><span class="line">59% — 96 </span><br><span class="line">58% — 94 </span><br><span class="line">57% — 91 </span><br><span class="line">56% — 8F </span><br><span class="line">55% — 8C </span><br><span class="line">54% — 8A </span><br><span class="line">53% — 87 </span><br><span class="line">52% — 85 </span><br><span class="line">51% — 82 </span><br><span class="line">50% — 80 </span><br><span class="line">49% — 7D </span><br><span class="line">48% — 7A </span><br><span class="line">47% — 78 </span><br><span class="line">46% — 75 </span><br><span class="line">45% — 73 </span><br><span class="line">44% — 70 </span><br><span class="line">43% — 6E </span><br><span class="line">42% — 6B </span><br><span class="line">41% — 69 </span><br><span class="line">40% — 66 </span><br><span class="line">39% — 63 </span><br><span class="line">38% — 61 </span><br><span class="line">37% — 5E </span><br><span class="line">36% — 5C </span><br><span class="line">35% — 59 </span><br><span class="line">34% — 57 </span><br><span class="line">33% — 54 </span><br><span class="line">32% — 52 </span><br><span class="line">31% — 4F </span><br><span class="line">30% — 4D </span><br><span class="line">29% — 4A </span><br><span class="line">28% — 47 </span><br><span class="line">27% — 45 </span><br><span class="line">26% — 42 </span><br><span class="line">25% — 40 </span><br><span class="line">24% — 3D </span><br><span class="line">23% — 3B </span><br><span class="line">22% — 38 </span><br><span class="line">21% — 36 </span><br><span class="line">20% — 33 </span><br><span class="line">19% — 30 </span><br><span class="line">18% — 2E </span><br><span class="line">17% — 2B </span><br><span class="line">16% — 29 </span><br><span class="line">15% — 26 </span><br><span class="line">14% — 24 </span><br><span class="line">13% — 21 </span><br><span class="line">12% — 1F </span><br><span class="line">11% — 1C </span><br><span class="line">10% — 1A </span><br><span class="line">9% — 17 </span><br><span class="line">8% — 14 </span><br><span class="line">7% — 12 </span><br><span class="line">6% — 0F </span><br><span class="line">5% — 0D </span><br><span class="line">4% — 0A </span><br><span class="line">3% — 08 </span><br><span class="line">2% — 05 </span><br><span class="line">1% — 03 </span><br><span class="line">0% — 00</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>路由器认证校园网的一个思路</title>
      <link href="/2018/08/09/%E8%B7%AF%E7%94%B1%E5%99%A8%E8%AE%A4%E8%AF%81%E6%A0%A1%E5%9B%AD%E7%BD%91%E7%9A%84%E4%B8%80%E4%B8%AA%E6%80%9D%E8%B7%AF/"/>
      <url>/2018/08/09/%E8%B7%AF%E7%94%B1%E5%99%A8%E8%AE%A4%E8%AF%81%E6%A0%A1%E5%9B%AD%E7%BD%91%E7%9A%84%E4%B8%80%E4%B8%AA%E6%80%9D%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>现在办公的地方在大学里，办理宽带的难度基本上跟登天的难度是一样儿一样儿的。</p><p>关于在路由器上认证校园网一直是一些高校的坑，毕竟一人一账号，电脑登了，手机不能上，手机登上了，电脑不能上，路由器又不能安装校园网客户端或者进行Web认证，有些路由器可以通过安装插件来实现锐捷认证，可惜这个学校不是锐捷😢。</p><p>但是这并不能阻止我要使用路由器进行校园网认证的脚步，手里有个X讯的K2，曾经刷的Padavan系统用来中继，现在家里已经全部换成千兆，淘汰的这个正好可以拿到公司进行愉快的玩(装)耍(X)。有的同学可能说了，你用笔记本分享个热点出来不就好了，或者买个360WiFi或者小米随身WiFi，奈何MacBook不支持一边连接WiFi一边分享热点的功能，有人又说了，你不会买个RJ45转接口啊，我也想买啊，还不是因为穷😂</p><p>当然以上都是冠冕堂皇的话，最重要的我需要$$乳才能扶墙啊，虽然App Store花12块就能买个小火箭或者安卓上随便找个客户端也行，但是全程打开确实太费电了，反正路由器要24小时打开，在路由器上挂上$$乳，打开GFW模式，电脑盒子手机就不用再配置代理了，这不是最美的事了吗。</p><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><p>一台可以刷OpenWRT的路由器，X讯的K2最合适不过了，刷上Breed后，找个OpenWRT就能开始愉快的玩耍了，因为之前写过shell的脚本用来在MBP上执行实现一键认证，当时就考虑到了路由器上基本都是只集成了ash，所以特意考虑了下语法，这样就能方便今天的迁移，夸一下自己，谁让我这么未雨绸缪。关于刷Breed我就不多说了，因为网上教程太多太简单，刷好之后刷固件就变成了傻瓜操作，根本不用操心变砖的事。</p><h1 id="Show-Time"><a href="#Show-Time" class="headerlink" title="Show Time"></a>Show Time</h1><p>首先就是使用抓包工具，Web认证的话Chrome足矣，如果是客户端，可以尝试Charles和Fiddler。</p><ul><li><p>打开Chrome，进入认证的网页，输入你的认证账号和密码，但是<strong>不要点</strong>认证或者登陆按钮，这时打开<strong>开发者工具</strong>视图，选择<strong>Network</strong>节点，勾上<strong>Preserve log</strong> 。</p><p><img src="/images/portal/1.png" alt=""></p><hr></li><li><p>然后点击认证或者登陆，出现下图。</p><p><img src="/images/portal/2.png" alt=""></p><hr></li><li><p>右键选中第一项最可疑的链接，然后<strong>Copy</strong>，再<strong>Copy as cURL</strong>，最后粘贴到记事本。</p><p><img src="/images/portal/3.png" alt=""></p><p><img src="/images/portal/4.png" alt=""></p><hr></li><li><p>得到下面的内容，就可以搜寻你认为可疑的内容了，然后你要做的就是动态改变需要的参数就可以。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="string">'http://x.x.x.x/Login?para=abcdefghijklmnopqrstuvwxyz==&amp;_=1533804052510'</span> -H <span class="string">'Pragma: no-cache'</span> -H <span class="string">'Accept-Encoding: gzip, deflate'</span> -H <span class="string">'Accept-Language: zh-CN,zh;q=0.9,und;q=0.8,en;q=0.7,zh-TW;q=0.6'</span> -H <span class="string">'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.84 Safari/537.36'</span> -H <span class="string">'Accept: */*'</span> -H <span class="string">'Referer: http://10.0.0.253/Index.jsp?hwid=00:00:00:00:00:00&amp;devip=10.0.0.252&amp;devport=0&amp;vlan=0'</span> -H <span class="string">'Cookie: JSESSIONID=57516FB172738FCEA999C2526AED0F5D'</span> -H <span class="string">'Connection: keep-alive'</span> -H <span class="string">'Cache-Control: no-cache'</span> --compressed</span><br></pre></td></tr></table></figure><p><img src="/2018/08/09/路由器认证校园网的一个思路/portal/5.png" alt=""></p><p>比如para后面的文本(我已经替换成了abcd…xyz)，很明显这个就是你账号密码生成的参数，紧接着的自然就是毫秒时间戳了(眼尖的你一定看出来了)，再有一个就是Cookie中的JSESSIONID了，para可以记录下，时间戳可以自己生成，但是JSESSIONID只能通过在线获取了，怎么获取到JSESSIONID呢？当然是curl大法。</p></li><li><p>首先通过ssh以root身份连接到OpenWRT中，然后安装curl，毕竟K2的闪存很小，所以很多东西需要自己安装，之所以选择OpenWRT就是因为自带了opkg管理器，可以免去小白重新编译固件去集成curl的步骤，登录后分别执行下面的命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opkg install curl</span><br></pre></td></tr></table></figure></li><li><p>下面就是我整理的获取Cookie中某个key中的value的方法，很明显，这个就是通过curl模拟打开认证的网页，然后获取<strong>Set-Cookie</strong>的值再打印出来</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#! /bin/sh</span><br><span class="line">session=$(curl -sI http:<span class="comment">//x.x.x.x/Index.jsp\?hwid=00:00:00:00:00:00\&amp;devip=10.0.0.252\&amp;devport=0\&amp;vlan=0 | tr -d '\r' | sed -En 's/^Set-Cookie: (.*)/\1/p')</span></span><br><span class="line">echo $session</span><br></pre></td></tr></table></figure></li><li><p>你得到的值可能是下面这样的</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JSESSIONID=E9CDB31EB128580EAB7FCF0C6A3D2AA4; Path=/</span><br></pre></td></tr></table></figure><p>但是你只需要分号以前的内容，这时候只有通过shell去取子串就可以了，然后就有了下面的内容：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#! /bin/sh</span><br><span class="line">session=$(curl -sI http:<span class="comment">//x.x.x.x/Index.jsp\?hwid=00:00:00:00:00:00\&amp;devip=10.0.0.252\&amp;devport=0\&amp;vlan=0 | tr -d '\r' | sed -En 's/^Set-Cookie: (.*)/\1/p')</span></span><br><span class="line">echo $session</span><br><span class="line">string=$(echo $&#123;session%; Path=<span class="comment">/*&#125;)</span></span><br><span class="line"><span class="comment">echo $string</span></span><br></pre></td></tr></table></figure></li><li><p>接下来是最简单的时间戳获取了，我已经准备好了，内容如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#! /bin/sh</span><br><span class="line">timeStamp=`date +%s`</span><br><span class="line">echo $timeStamp</span><br><span class="line">currentTimeStamp=$((timeStamp*<span class="number">1000</span>))</span><br><span class="line">echo $currentTimeStamp</span><br></pre></td></tr></table></figure><p>上面的脚本就可以打印当前时间戳了。</p></li><li><p>最后需要的就是拼接参数了，也就是上面获取的<strong>JSESSIONID</strong>，然后就有了下面的内容：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#! /bin/sh</span><br><span class="line">session=$(curl -sI http:<span class="comment">//10.0.0.253/Index.jsp\?hwid=00:00:00:00:00:00\&amp;devip=10.0.0.252\&amp;devport=0\&amp;vlan=0 | tr -d '\r' | sed -En 's/^Set-Cookie: (.*)/\1/p')</span></span><br><span class="line">echo $session</span><br><span class="line">string=$(echo $&#123;session%; Path=<span class="comment">/*&#125;)</span></span><br><span class="line"><span class="comment">echo $string</span></span><br><span class="line"><span class="comment">param="Cookie: $&#123;string&#125;"</span></span><br><span class="line"><span class="comment">echo $param</span></span><br><span class="line"><span class="comment">timeStamp=`date +%s`</span></span><br><span class="line"><span class="comment">echo $timeStamp</span></span><br><span class="line"><span class="comment">currentTimeStamp=$((timeStamp*1000))</span></span><br><span class="line"><span class="comment">echo $currentTimeStamp</span></span><br><span class="line"><span class="comment">cmd="curl -i 'http://x.x.x.x/Login?para=abcdefghijklmnopqrstuvwxyz==&amp;_=$&#123;currentTimeStamp&#125;' -H 'Pragma: no-cache' -H 'Accept-Encoding: gzip, deflate' -H 'Accept-Language: zh-CN,zh;q=0.9,und;q=0.8,en;q=0.7,zh-TW;q=0.6' -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.139 Safari/537.36' -H 'Accept: */</span>*<span class="string">' -H '</span>Referer: http:<span class="comment">//x.x.x.x/Index.jsp?hwid=00:00:00:00:00:00&amp;devip=10.0.0.252&amp;devport=0&amp;vlan=0' -H 'Connection: keep-alive' -H 'Cache-Control: no-cache' -H '$&#123;param&#125;' "</span></span><br><span class="line">echo $cmd</span><br><span class="line">eval <span class="string">"$cmd"</span></span><br></pre></td></tr></table></figure><p>到这一步，基本上就完成了，你要做的就是把我打的x.x.x.x换成你们学校的ip或者url，当然不同的系统肯定不一样，但是都是大同小异的。把上面的文件保存为portal.sh，在赋予执行权限（不理解为什么执行chmod a+x竟然不管用）。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 portal.sh</span><br></pre></td></tr></table></figure></li><li><p>下面开始见证奇迹，执行脚本，看能否通过</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh portal.sh</span><br></pre></td></tr></table></figure><p>我这边打印的结果是：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">response</span>&gt;</span><span class="tag">&lt;<span class="name">success</span>&gt;</span>true<span class="tag">&lt;/<span class="name">success</span>&gt;</span><span class="tag">&lt;/<span class="name">response</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后我打开百度，此时已经可以打开网页了，不会再弹出认证的网页了，手机和电脑可以愉快的同时在线了，虽然共享带宽，但是足矣了。如果你以为这样的完事了，那你真是Too Young了，我自然是不会每次都手动去执行这个shell，定时任务必须是立马想到的，于是我打开OpenWRT的管理界面，进入定时任务，设置了每天上午8:20和下午13:20自动执行，最最重要的是你还要写个脚本每十分钟去定时curl一下百度，因为校园网是检测固定时间没有网络流量就会断网。</p></li></ul><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>上面的脚本只是一个参考版本，建议大家去改成更完善的shell脚本，其他的校园网都是同理的，如果你实现了这个，其他的基本就没有什么问题了。</p><p>搭建$$乳也是非常简单的，有可能违规，就不给大家介绍了，只要网上搜一个适用于OpenWRT的ipk文件，scp到路由器里安装重启就可以在web页面进行设置了。</p>]]></content>
      
      
      <categories>
          
          <category> 生活职场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 校园网,路由器,portal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>程序猿的修炼之道</title>
      <link href="/2018/08/07/%E7%A8%8B%E5%BA%8F%E7%8C%BF%E7%9A%84%E4%BF%AE%E7%82%BC%E4%B9%8B%E9%81%93/"/>
      <url>/2018/08/07/%E7%A8%8B%E5%BA%8F%E7%8C%BF%E7%9A%84%E4%BF%AE%E7%82%BC%E4%B9%8B%E9%81%93/</url>
      
        <content type="html"><![CDATA[<p>最近公司的事很忙，再加上家里也有不少事，所以这些日子没有什么产出。最近总想写一些关于程序员的事，所以说写就写。</p><p>所谓成长，应该就是那句”如果你觉得以前的自己很傻X，那你就成长了”，其实生活不就是让你一次又一次觉得自己以前很傻的过程吗，很多人觉得傻是很可笑的事，但是你敢说成长是很可笑的事吗？</p><p>曾经我也是一名北漂，记得刚到北京的时候，我跟同学租着一个月几百的群租公寓，上班路程要两个小时的公交和地铁，公交的拥挤程度让你真正见识到什么是真正的”北京欢迎你”，图的就是省点房租，但是一周过去后我就发现自己的想法很可笑，虽然两个小时的公交我起码可以看一小时的技术文章，但是如果我找一个离公司近的房子，我就可以省出一个小时的时间来进行高效的学习，这时我不免开始嘲笑一周前因为省了一点房租而沾沾自喜的我。第二周我就开始找离公司近的新房子，然后为了退押金走在没有路灯伸手不见五指的街上，那天晚上我就发誓：”我以后绝对不会再回这了！”</p><p>渐渐的我适应了北京的环境，每天在地铁上读技术文章丰富自己的技术认知，当然还有更幸运的是我遇到了一个好的技术老大，一个好的师傅以及一票好同事，我深刻的知道那段日子我最苦，但是也是我进步最快和最开心的日子，我们每周有技术分享，有CodeReview，有需求做不完同事间的互帮互助。</p><p>后来我离开了北京。回到家后感触最深的就是工作机会跟北京比少太多了，毕竟三四线城市的互联网环境跟北上广比就是天壤之别，大部分公司都是做外包或者接一些ZF工程。但不是在小公司你就不能没有一番作为，回家的这段时间，我一直利用自己业余的时间丰富自己的职业技能和非职业技能，坚持一年下来，你同样会发现自己有很大的进步，所以与其抱怨家里的就业环境，不如丰富自己技能，毕竟是石头永远不会发光(但是金子一定会发光)。</p><p>关于程序员，很多人说是青春饭，这一点我也是深信不疑的，毕竟年轻人比你学东西快，比你身体好，比你能加班，当然最重要的一点他们要的工资比你低，即便你开公司你也会选择这样的人，但这并不是你止步不前的理由，如果同样的工作年限，你的能力比同事强，说明你的学习能力强，正常情况下老板肯定会优先考虑你来转管理的，转型管理是避开青春饭的最佳出路。不过我我问过身边的同事，如果一个技术不如你的人当你的领导你会怎样，大多数人的回答都是肯定不服，当然也有人回答既然人家当上领导就算技术不强肯定也是管理能力特别强，不过紧接着他又说：”这样的人少之又少，毕竟技术不精通却还要管理技术人员确实很难服众”。所以如果你想转管理的话，趁现在好好磨练你的技术吧。</p><p>关于技术的磨练，我觉得最主要的就是效率，效率不仅仅是做得快，还要保证质量，我确实见到过一些人很快的完成需求，然后花费大量时间去改bug，这些人往往还能得到团队和领导的认可，就是因为他们做得快，让大家忽略了质量的问题，而往往就是因为代码的质量无法保证，导致后面入职的新同事天天对离职的老同事问候爹娘😂，后来的人给前面的人”擦屁股”，然后往复循环，这样的结果就是技术债越积越多，当然很多外包项目负责人经常说：”没事，我们这就是一锤子买卖，交付的时候合格了就行，后面的事就不管了”。但是我想说的是这样往往受伤的不光是做项目的人，还有公司，写项目的人做东西没质量得不到提高，接项目的公司因为项目后期出现问题无法给客户完美解决而失去了客户。当然还有与之相反的一类人，干活儿慢到不行，分配任务的时候总说自己负责的东西又麻烦又难，本来正常一天的工作任务，今天没做完，明天又没做完，抱着反正老板和经理不懂技术的心里或者沉浸在认为自己负责的是”最难”的模块晚一两天很正常，全然一副小白兔的既视感。</p><p>当你做到写出的代码又快质量又好的时候，你就应该满足了吗，当然不是，做完了项目，我们要分发，要部署，这些事同样浪费时间，而且是重复的工作，重复的工作一定要脚本化，CI/CD是很成熟的解决办法，配合上SonarQube静态代码审查，我相信你的水平肯定会更上一层楼的。</p><p>我有个学弟曾问过我：”师兄，我觉得搞技术太枯燥了，我爸妈当时就是觉得这一行工资高，非让我报这个”。我相信这样的人不在少数，因为我是从小就对编程有兴趣，所以我在这上面投入了大量的时间，因为每次做完东西的成就感让我感觉特别舒服，除了工作的项目，业余时间利用技术我也做了很多事，幸运的是有那么一票技术特别棒的面试官就喜欢把技术用在生活上的人，毕竟技术源于生活，一个人如果业余的事都做得很精致，工作上的事还会有什么问题吗，如果你是这样的人，你在面试的时候会大大加分的。所以如果你觉得技术枯燥，不妨试试把你学的东西用在生活上，比如用树莓派做个魔镜，手动编译个路由器固件给家里的网络去个广告，或者买一些智能家居组件组一个物联网中心。</p><p>我印象比较深刻的就是我在北京遇到我老大的时候，他就是因为我知道的东西多(虽然都不精通)而对我印象不错的。我本身是个Android开发，业余时间我学习了Linux，编译过AOSP源码，编译过FFMpeg，编译过路由器固件，学习了Shell，搭建了持续集成，学习了Docker，还用自己的服务器玩了虚拟化，组过HomeLab，玩树莓派，然后面试的时候我跟面试官说起这些的时候给我加了很多印象分，当然如果凑巧这个公司可能正好用了你业余时间学过和用过的技术，不要你要谁？同样的经验同样的水平，不要你要谁？</p><p>认识我的人可能都知道我的目标就是全栈。我知道很多人不认可全栈，认为全栈就是全菜，说全栈工程师是哪个都会但是哪个都不深，但我觉得这并不是问题，因为在我的认知里是当你在某个方向很熟练的情况下你就应该往广度发展了，当你会做前端时，你做后端就会知道接口怎么设计才是对前端友好；当你懂devops的时候，你就知道怎么设计配置文件能让项目方便部署和迁移；当你用过多个数据库的时候(肯定不仅仅是CRUD)，你就知道什么时候该用哪个和有什么好处以及有什么坑。只有当你在各个方面都有涉猎的时候，你才能做到最合适的架构就在我心中，因为我心中有架构。如果这时候老板慧眼识珠要选一个人总览全局，不找你找谁？如果没找你的话，不妨打开招聘软件，搜一下”技术总监”、”技术经理”、”架构师”、”CTO”等关键字，相信薪资和需求会满足你的预期。</p><p>最重要的就是你知道自己想要什么，明确了就为之而努力，这样才不会后悔，然后干掉这碗毒鸡汤。</p>]]></content>
      
      
      <categories>
          
          <category> 生活职场 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 程序猿,修养,修炼 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot入门</title>
      <link href="/2018/07/31/Spring%20Boot%E5%85%A5%E9%97%A8/"/>
      <url>/2018/07/31/Spring%20Boot%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><strong>我为什么会选择用Spring Boot来做Web项目，主要就是因为它支持yaml格式的配置，配合各种stater插件，让开发者终于不再为眼花缭乱的xml配置文件而头疼了。再加上其内嵌Tomcat，可以免去一些新手配置环境的烦恼。</strong></p><h5 id="后续我会写一系列关于Spring-Cloud的文章，所以今天的Spring-Boot教程是后面的Spring-Cloud的基础。"><a href="#后续我会写一系列关于Spring-Cloud的文章，所以今天的Spring-Boot教程是后面的Spring-Cloud的基础。" class="headerlink" title="后续我会写一系列关于Spring Cloud的文章，所以今天的Spring Boot教程是后面的Spring Cloud的基础。"></a>后续我会写一系列关于<a href="https://projects.spring.io/spring-cloud/" target="_blank" rel="noopener">Spring Cloud</a>的文章，所以今天的Spring Boot教程是后面的Spring Cloud的基础。</h5><h1 id="关于Spring-Boot-官网链接"><a href="#关于Spring-Boot-官网链接" class="headerlink" title="关于Spring Boot 官网链接"></a>关于Spring Boot <a href="https://spring.io/projects/spring-boot" target="_blank" rel="noopener">官网链接</a></h1><h5 id="Spring-Boot是由Pivotal团队提供的全新框架，其设计目的是用来简化新Spring应用的初始搭建以及开发过程。该框架使用了特定的方式来进行配置，从而使开发人员不再需要定义样板化的配置。主要具有如下的特点："><a href="#Spring-Boot是由Pivotal团队提供的全新框架，其设计目的是用来简化新Spring应用的初始搭建以及开发过程。该框架使用了特定的方式来进行配置，从而使开发人员不再需要定义样板化的配置。主要具有如下的特点：" class="headerlink" title="Spring Boot是由Pivotal团队提供的全新框架，其设计目的是用来简化新Spring应用的初始搭建以及开发过程。该框架使用了特定的方式来进行配置，从而使开发人员不再需要定义样板化的配置。主要具有如下的特点："></a>Spring Boot是由Pivotal团队提供的全新框架，其设计目的是用来简化新Spring应用的初始搭建以及开发过程。该框架使用了特定的方式来进行配置，从而使开发人员不再需要定义样板化的配置。主要具有如下的特点：</h5><ul><li><strong>嵌入的Tomcat，无需部署WAR文件。</strong></li><li><strong>简化Maven配置。</strong></li><li><strong>自动配置Spring.</strong></li><li><strong>配置多种启动环境(prod,dev,test等)。</strong></li><li><strong>yaml配置。</strong></li></ul><h1 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h1><h5 id="打开Idea，新建一个Maven项目，填好GroupId-一般是公司或个人域名倒过来写-和ArtifactId-项目标识-以及版本号。然后打开项目目录下的pom-xml"><a href="#打开Idea，新建一个Maven项目，填好GroupId-一般是公司或个人域名倒过来写-和ArtifactId-项目标识-以及版本号。然后打开项目目录下的pom-xml" class="headerlink" title="打开Idea，新建一个Maven项目，填好GroupId(一般是公司或个人域名倒过来写)和ArtifactId(项目标识)以及版本号。然后打开项目目录下的pom.xml"></a>打开Idea，新建一个Maven项目，填好GroupId(一般是公司或个人域名倒过来写)和ArtifactId(项目标识)以及版本号。然后打开项目目录下的pom.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.lizhenghlh<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hellospringboot<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-boot.version</span>&gt;</span>1.5.12.RELEASE<span class="tag">&lt;/<span class="name">spring-boot.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatisplus.spring.boot.version</span>&gt;</span>1.0.5<span class="tag">&lt;/<span class="name">mybatisplus.spring.boot.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatisplus.version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">mybatisplus.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>8.0.11<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">druid.version</span>&gt;</span>1.1.3<span class="tag">&lt;/<span class="name">druid.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-support<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;druid.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatisplus-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatisplus.spring.boot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatisplus.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>public<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun nexus<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="然后创建HelloApplication"><a href="#然后创建HelloApplication" class="headerlink" title="然后创建HelloApplication"></a>然后创建HelloApplication</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.builder.SpringApplicationBuilder;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by zhenglee on 2018/7/31.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@SpringBootApplication</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">HelloApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(HelloApplication.class).web(<span class="literal">true</span>).run(args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>创建HelloController</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(<span class="string">"hello"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    @GetMapping</span><br><span class="line">    public <span class="built_in">String</span> hello() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello, Spring Boot!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="这时候你需要在application-dev-yml中配置好你的数据库配置，包括url，username，password，如果配置正确这时候就可以启动项目了，启动前先创建启动配置，如下图："><a href="#这时候你需要在application-dev-yml中配置好你的数据库配置，包括url，username，password，如果配置正确这时候就可以启动项目了，启动前先创建启动配置，如下图：" class="headerlink" title="这时候你需要在application-dev.yml中配置好你的数据库配置，包括url，username，password，如果配置正确这时候就可以启动项目了，启动前先创建启动配置，如下图："></a>这时候你需要在application-dev.yml中配置好你的数据库配置，包括url，username，password，如果配置正确这时候就可以启动项目了，启动前先创建启动配置，如下图：</h5><p><img src="/2018/07/31/Spring Boot入门/boot/1.png" alt="1"></p><h5 id="此时在浏览器中输入http-localhost-8080-hello-，就可以看到“Hello-Spring-Boot-”字样代表项目启动成功。"><a href="#此时在浏览器中输入http-localhost-8080-hello-，就可以看到“Hello-Spring-Boot-”字样代表项目启动成功。" class="headerlink" title="此时在浏览器中输入http://localhost:8080/hello ，就可以看到“Hello, Spring Boot!”字样代表项目启动成功。"></a>此时在浏览器中输入<a href="http://localhost:8080/hello" target="_blank" rel="noopener">http://localhost:8080/hello</a> ，就可以看到<strong>“Hello, Spring Boot!”</strong>字样代表项目启动成功。</h5><h5 id="当然仅仅显示一个“Hello-Spring-Boot-”似乎太简单了，下面我继续创建一个BookController用来管理书籍，其中Book的实体，Dao，Service我就不放代码了，有兴趣的可以通过我的Github链接来获取项目的源码，BookController的代码如下："><a href="#当然仅仅显示一个“Hello-Spring-Boot-”似乎太简单了，下面我继续创建一个BookController用来管理书籍，其中Book的实体，Dao，Service我就不放代码了，有兴趣的可以通过我的Github链接来获取项目的源码，BookController的代码如下：" class="headerlink" title="当然仅仅显示一个“Hello, Spring Boot!”似乎太简单了，下面我继续创建一个BookController用来管理书籍，其中Book的实体，Dao，Service我就不放代码了，有兴趣的可以通过我的Github链接来获取项目的源码，BookController的代码如下："></a>当然仅仅显示一个<strong>“Hello, Spring Boot!”</strong>似乎太简单了，下面我继续创建一个BookController用来管理书籍，其中Book的实体，Dao，Service我就不放代码了，有兴趣的可以通过我的<a href="https://github.com/lizhenghlh/hellospringboot.git" target="_blank" rel="noopener">Github链接</a>来获取项目的源码，BookController的代码如下：</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.github.lizhenghlh.entity.Book;</span><br><span class="line"><span class="keyword">import</span> io.github.lizhenghlh.entity.Response;</span><br><span class="line"><span class="keyword">import</span> io.github.lizhenghlh.service.BookService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(<span class="string">"books"</span>)</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">BookController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private BookService bookService;</span><br><span class="line"></span><br><span class="line">    @PostMapping</span><br><span class="line">    public Response add(Book book) &#123;</span><br><span class="line">        bookService.insert(book);</span><br><span class="line">        <span class="keyword">return</span> Response.build().put(<span class="string">"data"</span>, book).success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @DeleteMapping</span><br><span class="line">    public Response <span class="keyword">delete</span>(Long id) &#123;</span><br><span class="line">        bookService.deleteById(id);</span><br><span class="line">        <span class="keyword">return</span> Response.build().success(<span class="string">"删除成功"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @PutMapping</span><br><span class="line">    public Response update(Book book) &#123;</span><br><span class="line">        final Book exist = bookService.selectById(book.getId());</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == exist) &#123;</span><br><span class="line">            <span class="keyword">return</span> Response.build().fail(<span class="string">"不存在此记录"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        bookService.updateById(book);</span><br><span class="line">        <span class="keyword">return</span> Response.build().put(<span class="string">"data"</span>, book).success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @GetMapping</span><br><span class="line">    public Response list() &#123;</span><br><span class="line">        <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt; result = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        result.put(<span class="string">"data"</span>, bookService.selectList(<span class="literal">null</span>));</span><br><span class="line">        <span class="keyword">return</span> Response.build(result).success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @GetMapping(<span class="string">"/&#123;id&#125;"</span>)</span><br><span class="line">    public Response findById(@PathVariable Long id) &#123;</span><br><span class="line">        final Book book = bookService.selectById(id);</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == book) &#123;</span><br><span class="line">            <span class="keyword">return</span> Response.build().fail(<span class="string">"不存在此记录"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Response.build().put(<span class="string">"data"</span>, book).success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="然后重启项目，打开postman或者paw，新建几个测试，一个书籍的增删改查就算做完了。这个项目很简单，没有做过多的严格处理，但是用来理解Web项目肯定是足够了。"><a href="#然后重启项目，打开postman或者paw，新建几个测试，一个书籍的增删改查就算做完了。这个项目很简单，没有做过多的严格处理，但是用来理解Web项目肯定是足够了。" class="headerlink" title="然后重启项目，打开postman或者paw，新建几个测试，一个书籍的增删改查就算做完了。这个项目很简单，没有做过多的严格处理，但是用来理解Web项目肯定是足够了。"></a>然后重启项目，打开postman或者paw，新建几个测试，一个书籍的增删改查就算做完了。这个项目很简单，没有做过多的严格处理，但是用来理解Web项目肯定是足够了。</h5><p><img src="/2018/07/31/Spring Boot入门/boot/2.png" alt="2"></p><p><img src="/2018/07/31/Spring Boot入门/boot/3.png" alt="3"></p><p><img src="/2018/07/31/Spring Boot入门/boot/4.png" alt="4"></p><p><img src="/2018/07/31/Spring Boot入门/boot/5.png" alt="5"></p><p><img src="/2018/07/31/Spring Boot入门/boot/6.png" alt="6"></p><h5 id="最后在放下项目的源码链接https-github-com-lizhenghlh-hellospringboot"><a href="#最后在放下项目的源码链接https-github-com-lizhenghlh-hellospringboot" class="headerlink" title="最后在放下项目的源码链接https://github.com/lizhenghlh/hellospringboot"></a>最后在放下项目的源码链接<a href="https://github.com/lizhenghlh/hellospringboot" target="_blank" rel="noopener">https://github.com/lizhenghlh/hellospringboot</a></h5>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>corn表达式</title>
      <link href="/2018/07/30/corn%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>/2018/07/30/corn%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h5 id="熟悉Linux或者后端开发的同学一定都遇到过执行定时任务的需求，其实不管是Linux下的corntab命令，还是Spring下-Scheduled注解，亦或是Quartz以及其他语言中的定时任务框架，都使用的是类似corn语法的表达式，所以了解corn表达式的语法是很有必要的。"><a href="#熟悉Linux或者后端开发的同学一定都遇到过执行定时任务的需求，其实不管是Linux下的corntab命令，还是Spring下-Scheduled注解，亦或是Quartz以及其他语言中的定时任务框架，都使用的是类似corn语法的表达式，所以了解corn表达式的语法是很有必要的。" class="headerlink" title="熟悉Linux或者后端开发的同学一定都遇到过执行定时任务的需求，其实不管是Linux下的corntab命令，还是Spring下@Scheduled注解，亦或是Quartz以及其他语言中的定时任务框架，都使用的是类似corn语法的表达式，所以了解corn表达式的语法是很有必要的。"></a>熟悉Linux或者后端开发的同学一定都遇到过执行定时任务的需求，其实不管是Linux下的corntab命令，还是Spring下@Scheduled注解，亦或是Quartz以及其他语言中的定时任务框架，都使用的是类似corn语法的表达式，所以了解corn表达式的语法是很有必要的。</h5><h5 id="在了解了corn的表达式语法后可以做些什么："><a href="#在了解了corn的表达式语法后可以做些什么：" class="headerlink" title="在了解了corn的表达式语法后可以做些什么："></a>在了解了corn的表达式语法后可以做些什么：</h5><ul><li><strong>Linux，树莓派，软路由通过配置corntab来执行shell用以定时备份数据库，如果你对抓包很熟悉，你就可以通过抓包来实现某些网站的定时自动签到，我最近就有写PT站自动签到的计划。</strong></li><li><strong>在使用Spring的@Scheduled注解，Quartz，或是其他语言的定时任务框架时，就是小Case了。</strong></li></ul><h5 id="我用corn做了什么："><a href="#我用corn做了什么：" class="headerlink" title="我用corn做了什么："></a>我用corn做了什么：</h5><ul><li><strong>最近我负责的后端项目，有一个需求是定时去请求某个接口获取数据，然后再进行统计分析。</strong></li><li><strong>由于我在大学提供的办公室里上班，没有拉宽带的权限，所以只能使用校园网的Portal认证来上网，但是电脑上登录了账号，手机就不能再登录了；前后端联调的时候也无法通过路由器组建局域网，每天上班第一件事都是登录网页认证这个事我自然无法忍受，所以我写了一个shell脚本自动验证，这样只要执行下脚本就实现了一步认证，再也不用手动打开网页输入账号密码了；而且这个shell脚本只要稍稍改下就可以在路由器上使用，上周末的时候我就动手把X讯的K2路由器刷了OpenWRT，然后安装了curl，最后把脚本scp到路由器里，然后通过corntab建了一个定时任务执行脚本，完美的实现了通过路由器来认证校园网。</strong></li></ul><h3 id="corn表达式："><a href="#corn表达式：" class="headerlink" title="corn表达式："></a>corn表达式：</h3><h5 id="结构：从左到右-空格隔开-：秒-分-时-日-月-星期-年份-年份可选"><a href="#结构：从左到右-空格隔开-：秒-分-时-日-月-星期-年份-年份可选" class="headerlink" title="结构：从左到右(空格隔开)：秒 分 时 日 月 星期 年份(年份可选)"></a>结构：从左到右(空格隔开)：秒 分 时 日 月 星期 年份(年份可选)</h5><h5 id="字段含义："><a href="#字段含义：" class="headerlink" title="字段含义："></a>字段含义：</h5><table><thead><tr><th>字段</th><th>允许值</th><th>允许的特殊字符</th></tr></thead><tbody><tr><td>秒（<em>Seconds</em>）</td><td>0~59</td><td>, - * /</td></tr><tr><td>分（<em>Minutes</em>）</td><td>0~59</td><td>, - * /</td></tr><tr><td>小时（<em>Hours</em>）</td><td>0~23</td><td>, - * /</td></tr><tr><td>日期（<em>DayofMonth</em>）</td><td>1~31</td><td>,- * ? / L W C</td></tr><tr><td>月份（<em>Month</em>）</td><td>1~12或英文月份简写</td><td>, - * /</td></tr><tr><td>星期（<em>DayofWeek</em>）</td><td>1~7或英文星期简写(1代表周日)</td><td>, - * ? / L C #</td></tr><tr><td>年(可选，留空)（<em>Year</em>）</td><td>1970~2099</td><td>, - * /</td></tr></tbody></table><h5 id="常用表达式样例："><a href="#常用表达式样例：" class="headerlink" title="常用表达式样例："></a>常用表达式样例：</h5><table><thead><tr><th>表达式</th><th>含义</th></tr></thead><tbody><tr><td><strong>0 0 2 1 * ? *</strong></td><td>表示在每月的1日的凌晨2点</td></tr><tr><td><strong>0 15 10 ? * MON-FRI</strong></td><td>表示周一到周五每天上午10:15</td></tr><tr><td><strong>0 15 10 ? 6L 2002-2006</strong></td><td>表示2002-2006年的每个月的最后一个星期五上午10:15</td></tr><tr><td><strong>0 0 10,14,16 * * ?</strong></td><td>每天上午10点，下午2点，4点</td></tr><tr><td><strong>0 0/30 9-17 * * ?</strong></td><td>朝九晚五工作时间内每半小时</td></tr><tr><td><strong>0 0 12 ? * WED</strong></td><td>表示每个星期三中午12点</td></tr><tr><td><strong>0 0 12 * * ?</strong></td><td>每天中午12点触发</td></tr><tr><td><strong>0 15 10 ? * *</strong></td><td>每天上午10:15触发</td></tr><tr><td><strong>0 15 10 * * ?</strong></td><td>每天上午10:15触发</td></tr><tr><td><strong>0 15 10 * <em> ? </em></strong></td><td>每天上午10:15触发</td></tr><tr><td><strong>0 15 10 * * ? 2005</strong></td><td>2005年的每天上午10:15触发</td></tr><tr><td><strong>0 * 14 <em> </em> ?</strong></td><td>在每天下午2点到下午2:59期间的每1分钟触发</td></tr><tr><td><strong>0 0/5 14 * * ?</strong></td><td>在每天下午2点到下午2:55期间的每5分钟触发</td></tr><tr><td><strong>0 0/5 14,18 * * ?</strong></td><td>在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟触发</td></tr><tr><td><strong>0 0-5 14 * * ?</strong></td><td>在每天下午2点到下午2:05期间的每1分钟触发</td></tr><tr><td><strong>0 10,44 14 ? 3 WED</strong></td><td>每年三月的星期三的下午2:10和2:44触发</td></tr><tr><td><strong>0 15 10 ? * MON-FRI</strong></td><td>周一至周五的上午10:15触发</td></tr><tr><td><strong>0 15 10 15 * ?</strong></td><td>每月15日上午10:15触发</td></tr><tr><td><strong>0 15 10 L * ?</strong></td><td>每月最后一日的上午10:15触发</td></tr><tr><td><strong>0 15 10 ? * 6L</strong></td><td>每月的最后一个星期五上午10:15触发</td></tr><tr><td><strong>0 15 10 ? * 6L 2002-2005</strong></td><td>2002年至2005年的每月的最后一个星期五上午10:15触发</td></tr><tr><td><strong>0 15 10 ? * 6#3</strong></td><td>每月的第三个星期五上午10:15触发</td></tr></tbody></table><h5 id="其实上述的表达式只要做到随用随查就好，所以最好大家都收藏或者记录下。"><a href="#其实上述的表达式只要做到随用随查就好，所以最好大家都收藏或者记录下。" class="headerlink" title="其实上述的表达式只要做到随用随查就好，所以最好大家都收藏或者记录下。"></a>其实上述的表达式只要做到随用随查就好，所以最好大家都收藏或者记录下。</h5>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> corntab,corn,定时任务 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ESXi下安装Lede软路由</title>
      <link href="/2018/07/26/ESXi%E4%B8%8B%E5%AE%89%E8%A3%85Lede%E8%BD%AF%E8%B7%AF%E7%94%B1/"/>
      <url>/2018/07/26/ESXi%E4%B8%8B%E5%AE%89%E8%A3%85Lede%E8%BD%AF%E8%B7%AF%E7%94%B1/</url>
      
        <content type="html"><![CDATA[<h5 id="上个月把家里的gen8升级到e3-1230-v2和16G-ECC内存，顺便趁着618新入了一块4T的NAS红盘，为的就是能愉快的玩虚拟化。"><a href="#上个月把家里的gen8升级到e3-1230-v2和16G-ECC内存，顺便趁着618新入了一块4T的NAS红盘，为的就是能愉快的玩虚拟化。" class="headerlink" title="上个月把家里的gen8升级到e3 1230 v2和16G ECC内存，顺便趁着618新入了一块4T的NAS红盘，为的就是能愉快的玩虚拟化。"></a>上个月把家里的gen8升级到e3 1230 v2和16G ECC内存，顺便趁着618新入了一块4T的NAS红盘，为的就是能愉快的玩虚拟化。</h5><h5 id="现在家里的gen8已经安装好ESXi-6-5，并且跑着一个Ubuntu16-04和一个群晖6-5。虽然gen8只是微型服务器，但是仅仅跑这两个虚拟机还是绰绰有余的，剩余的技能完全足够再开一个软路由和一台Ubuntu18-04来玩爽了。"><a href="#现在家里的gen8已经安装好ESXi-6-5，并且跑着一个Ubuntu16-04和一个群晖6-5。虽然gen8只是微型服务器，但是仅仅跑这两个虚拟机还是绰绰有余的，剩余的技能完全足够再开一个软路由和一台Ubuntu18-04来玩爽了。" class="headerlink" title="现在家里的gen8已经安装好ESXi 6.5，并且跑着一个Ubuntu16.04和一个群晖6.5。虽然gen8只是微型服务器，但是仅仅跑这两个虚拟机还是绰绰有余的，剩余的技能完全足够再开一个软路由和一台Ubuntu18.04来玩爽了。"></a>现在家里的gen8已经安装好ESXi 6.5，并且跑着一个Ubuntu16.04和一个群晖6.5。虽然gen8只是微型服务器，但是仅仅跑这两个虚拟机还是绰绰有余的，剩余的技能完全足够再开一个软路由和一台Ubuntu18.04来玩爽了。</h5><h5 id="昨晚已经收到在深水宝买的8口千兆交换机，支持网管和链路聚合。"><a href="#昨晚已经收到在深水宝买的8口千兆交换机，支持网管和链路聚合。" class="headerlink" title="昨晚已经收到在深水宝买的8口千兆交换机，支持网管和链路聚合。"></a>昨晚已经收到在深水宝买的8口千兆交换机，支持网管和链路聚合。</h5><h5 id="先说下我使用软路由的需求，基本跟我使用梅林的需求一样，因为现在家里使用的是网件的路由器刷的梅林固件，我使用的插件主要有："><a href="#先说下我使用软路由的需求，基本跟我使用梅林的需求一样，因为现在家里使用的是网件的路由器刷的梅林固件，我使用的插件主要有：" class="headerlink" title="先说下我使用软路由的需求，基本跟我使用梅林的需求一样，因为现在家里使用的是网件的路由器刷的梅林固件，我使用的插件主要有："></a>先说下我使用软路由的需求，基本跟我使用梅林的需求一样，因为现在家里使用的是网件的路由器刷的梅林固件，我使用的插件主要有：</h5><ul><li><p><strong><em>酸酸乳</em></strong>(你懂得，走GFW List模式，畅游真正的互联网)</p></li><li><p><strong><em>KoolProxy</em></strong>(过滤广告，看个视频要一分多钟的广告，你能忍吗)</p></li><li><p><strong><em>Aliddns</em></strong>(有公网IP谁还用花生壳和Ngrok)</p></li><li><p><strong><em>自动签到</em></strong>(支持的大多数主流网站，但是不支持PT站，所以后面打算自己写PT站自动签到的shell，通过corntab来执行)</p></li></ul><h5 id="至于为什么要切换到软路由呢，主要就是R6400每次开启KoolProxy都会造成网速慢很多，有时候连图片都加载不出来，我猜测可能是R6400机能太弱或者KoolProxy优化的不好的原因，切到软路由的话，R6400只要专心的做一个AP就好了。"><a href="#至于为什么要切换到软路由呢，主要就是R6400每次开启KoolProxy都会造成网速慢很多，有时候连图片都加载不出来，我猜测可能是R6400机能太弱或者KoolProxy优化的不好的原因，切到软路由的话，R6400只要专心的做一个AP就好了。" class="headerlink" title="至于为什么要切换到软路由呢，主要就是R6400每次开启KoolProxy都会造成网速慢很多，有时候连图片都加载不出来，我猜测可能是R6400机能太弱或者KoolProxy优化的不好的原因，切到软路由的话，R6400只要专心的做一个AP就好了。"></a>至于为什么要切换到软路由呢，主要就是R6400每次开启KoolProxy都会造成网速慢很多，有时候连图片都加载不出来，我猜测可能是R6400机能太弱或者KoolProxy优化的不好的原因，切到软路由的话，R6400只要专心的做一个AP就好了。</h5><h5 id="上网调研了一下，目前软路由主要有Lede，爱快，海蜘蛛等等，最终我选择的是Lede。"><a href="#上网调研了一下，目前软路由主要有Lede，爱快，海蜘蛛等等，最终我选择的是Lede。" class="headerlink" title="上网调研了一下，目前软路由主要有Lede，爱快，海蜘蛛等等，最终我选择的是Lede。"></a>上网调研了一下，目前软路由主要有Lede，爱快，海蜘蛛等等，最终我选择的是Lede。</h5><h5 id="其实Lede也就是现在的OpenWRT，因为又合并到一起了。😂"><a href="#其实Lede也就是现在的OpenWRT，因为又合并到一起了。😂" class="headerlink" title="其实Lede也就是现在的OpenWRT，因为又合并到一起了。😂"></a>其实Lede也就是现在的OpenWRT，因为又合并到一起了。😂</h5><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><ol><li><p>打开固件<a href="http://firmware.koolshare.cn/LEDE_X64_fw867/%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%BD%AC%E7%9B%98%E6%88%96PE%E4%B8%8B%E5%86%99%E7%9B%98%E4%B8%93%E7%94%A8/" target="_blank" rel="noopener">下载链接</a>，选择版本，我下载的是v2.6的版本，下载后解压出img文件。但是安装完之后我才知道Lede已经合并回OpenWrt，所以你可以直接下载OpenWrt的2.15版本。</p></li><li><p>下载StarWind V2V Converter并安装，打开后</p><p><img src="/images/lede/1.png" alt="1"><br><img src="/images/lede/2.png" alt="2"></p><p><img src="/images/lede/3.png" alt="3"></p><p><img src="/images/lede/4.png" alt="4"></p><p><img src="/images/lede/5.png" alt="5"></p><p><img src="/images/lede/6.png" alt="6"></p><p><img src="/images/lede/7.png" alt="7"></p><p>生成了2个文件，这时候登录ESXi的web管理界面，在数据存储浏览器中将刚才生成的文件上传进去，上传完成之后你会发现两个文件变成了一个，这是正常的。</p></li><li><p>在web界面的网络节点中选中vSwitch0，然后点击右边的编辑设置，按下图设置好保存：</p><p><img src="/images/lede/s1.png" alt="s1"></p></li><li><p>添加一个新的虚拟交换机vSwitch1，按下图设置后点击添加：</p><p><img src="/images/lede/s2.png" alt="s2"></p></li><li><p>添加端口组，并关联至vSwitch1，如下图：</p><p><img src="/images/lede/s3.png" alt="s3"></p></li><li><p>注册新的虚拟机，选择<strong>Linux类型</strong>，操作系统选择“<strong>其他Linux 64位</strong>”，删掉默认分配的硬盘，选择我们刚才上传的<strong>lede-v2.6.vmdk</strong>，然后添加新的网络适配器并选择刚才创建的<strong>VM Network1</strong>，然后保存。</p></li><li><p>此时先选中刚刚创建好的lede虚拟机右键—&gt;自动启动—&gt;开启。</p></li><li><p>这时候主要打开虚拟机的电源就好了，然后查看控制台，直到控制台不在刷新的时候敲一下回车，你会看到下图：</p><p><img src="/images/lede/l1.png" alt="l1"></p></li><li><p>距离成功只差一步了，那就是设置路由器的LAN IP ，控制台上键入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/config</span><br><span class="line">cp network network.bak</span><br><span class="line">vim /etc/config/network</span><br></pre></td></tr></table></figure><p>上述代码的第二步是为了备份配置文件，出错的时候只有恢复下即可，紧接着就是修改IP了，我设置的<code>192.168.0.1</code>，当然你可以根据自己的喜好设置。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">config interface <span class="string">'loopback'</span></span><br><span class="line">option ifname <span class="string">'lo'</span></span><br><span class="line">option proto <span class="string">'static'</span></span><br><span class="line">option ipaddr <span class="string">'127.0.0.1'</span></span><br><span class="line">option netmask <span class="string">'255.0.0.0'</span></span><br><span class="line"></span><br><span class="line">config globals <span class="string">'globals'</span></span><br><span class="line">option ula_prefix <span class="string">'fd07:0156:b6bb::/48'</span></span><br><span class="line"></span><br><span class="line">config interface <span class="string">'lan'</span></span><br><span class="line">option <span class="built_in">type</span> <span class="string">'bridge'</span></span><br><span class="line">option ifname <span class="string">'eth0 eth1 eth2 eth3'</span></span><br><span class="line">option proto <span class="string">'static'</span></span><br><span class="line">option ipaddr <span class="string">'192.168.0.1'</span></span><br><span class="line">option netmask <span class="string">'255.255.255.0'</span></span><br><span class="line">option ip6assign <span class="string">'60'</span></span><br><span class="line"></span><br><span class="line">config interface <span class="string">'wan'</span></span><br><span class="line">option ifname <span class="string">'eth4'</span></span><br><span class="line">option proto <span class="string">'dhcp'</span></span><br><span class="line"></span><br><span class="line">config interface <span class="string">'wan6'</span></span><br><span class="line">option ifname <span class="string">'eth4'</span></span><br><span class="line">option proto <span class="string">'dhcpv6'</span></span><br></pre></td></tr></table></figure><p>设置好LAN IP后，还需要重启网络服务，键入如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/network restart</span><br></pre></td></tr></table></figure></li><li><p>万事俱备只欠东风了，最后就是访问<a href="http://192.168.0.1" target="_blank" rel="noopener">http://192.168.0.1</a> ，如果让提示让你输入密码，恭喜你，Lede安装完成，如下图所示：</p><p><img src="/images/lede/l2.png" alt="l2"></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> ESXi </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ESXi,Lede,软路由,OpenWRT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>http返回200,status却是failed</title>
      <link href="/2018/07/25/http%E8%BF%94%E5%9B%9E200-status%E5%8D%B4%E6%98%AFfailed/"/>
      <url>/2018/07/25/http%E8%BF%94%E5%9B%9E200-status%E5%8D%B4%E6%98%AFfailed/</url>
      
        <content type="html"><![CDATA[<p><strong>今天刚到公司，就有前端同学说刚部署的前端代码在访问的时候网页一篇空白，我部署了一版一看，还真是这样，再三确认前端同学在本地构建并访问没有任何问题，紧接着微信就响起来了，其他兄弟公司的项目也都出了问题，我赶紧打开网页查看，果然所有网页都是空白，更神奇的是Chrome报了如下的问题：</strong></p><p><img src="/images/za/1.jpeg" alt="status显示failed"><br><img src="/images/za/2.jpeg" alt="http code显示200"><br><strong>文档状态显示failed，但是http状态码确是200。😂</strong><br><strong>这真是奇了怪了，我问后端同学也没人见过这样的问题。</strong></p><p><strong>紧接着我去查看Nginx的log，也没发现什么问题。这时候微信和电话已经开始轮番轰炸了，大家都在问项目怎么访问不了。最后只得一级一级的排查，在最后ssh登录网关机查看Nginx的时候，我刚输入<code>cd</code>，再按tab键补全路径的时候，系统显示如下：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cannot create temp file <span class="keyword">for</span> here-document: No space left on device</span><br></pre></td></tr></table></figure><p><strong>原来是磁盘空间不足了，所以Nginx无法完成中转，直觉告诉我应该是系统内的Docker镜像太多了，当键入<code>docker images</code>的时候，好么，果然问题在这，再删除了一些不用的镜像后，问题解决，所有网站恢复正常。</strong></p>]]></content>
      
      
      <categories>
          
          <category> 疑难杂症 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 疑难杂症 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Node小提示</title>
      <link href="/2018/07/23/Node%E5%B0%8F%E6%8F%90%E7%A4%BA/"/>
      <url>/2018/07/23/Node%E5%B0%8F%E6%8F%90%E7%A4%BA/</url>
      
        <content type="html"><![CDATA[<h5 id="在做开发的过程中，经常会遇到一些场景使用到Node，比如构建前端项目或者使用Hexo写博客，这批文章主要记录我在使用Node过程中遇到的一些问题和解决方案。"><a href="#在做开发的过程中，经常会遇到一些场景使用到Node，比如构建前端项目或者使用Hexo写博客，这批文章主要记录我在使用Node过程中遇到的一些问题和解决方案。" class="headerlink" title="在做开发的过程中，经常会遇到一些场景使用到Node，比如构建前端项目或者使用Hexo写博客，这批文章主要记录我在使用Node过程中遇到的一些问题和解决方案。"></a>在做开发的过程中，经常会遇到一些场景使用到Node，比如构建前端项目或者使用Hexo写博客，这批文章主要记录我在使用Node过程中遇到的一些问题和解决方案。</h5><h1 id="NPM相关"><a href="#NPM相关" class="headerlink" title="NPM相关"></a>NPM相关</h1><h5 id="使用Node就必不可少的会使用到npm，但是因为一些你知我知的原因，我们的网络访问npm的速度是很感人的，通常我们会选择使用cnpm来加速。"><a href="#使用Node就必不可少的会使用到npm，但是因为一些你知我知的原因，我们的网络访问npm的速度是很感人的，通常我们会选择使用cnpm来加速。" class="headerlink" title="使用Node就必不可少的会使用到npm，但是因为一些你知我知的原因，我们的网络访问npm的速度是很感人的，通常我们会选择使用cnpm来加速。"></a>使用Node就必不可少的会使用到npm，但是因为一些你知我知的原因，我们的网络访问npm的速度是很感人的，通常我们会选择使用cnpm来加速。</h5><h3 id="cnpm："><a href="#cnpm：" class="headerlink" title="cnpm："></a>cnpm：</h3><h5 id="安装cnpm"><a href="#安装cnpm" class="headerlink" title="安装cnpm"></a>安装cnpm</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><h5 id="之后我们在执行npm命令时，只要将npm替换为cnpm即可。"><a href="#之后我们在执行npm命令时，只要将npm替换为cnpm即可。" class="headerlink" title="之后我们在执行npm命令时，只要将npm替换为cnpm即可。"></a>之后我们在执行npm命令时，只要将npm替换为cnpm即可。</h5><h5 id="原命令："><a href="#原命令：" class="headerlink" title="原命令："></a>原命令：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i//npm install的简写</span><br></pre></td></tr></table></figure><h5 id="现命令："><a href="#现命令：" class="headerlink" title="现命令："></a>现命令：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i//cnpm install的简写</span><br></pre></td></tr></table></figure><h3 id="yarn"><a href="#yarn" class="headerlink" title="yarn:"></a>yarn:</h3><h5 id="yarn是我最喜欢的工具，也是我一直在用的。"><a href="#yarn是我最喜欢的工具，也是我一直在用的。" class="headerlink" title="yarn是我最喜欢的工具，也是我一直在用的。"></a>yarn是我最喜欢的工具，也是我一直在用的。</h5><h5 id="安装yarn，Ubuntu的安装命令："><a href="#安装yarn，Ubuntu的安装命令：" class="headerlink" title="安装yarn，Ubuntu的安装命令："></a>安装yarn，Ubuntu的安装命令：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"deb https://dl.yarnpkg.com/debian/ stable main"</span> | sudo tee /etc/apt/sources.list.d/yarn.list</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install yarn</span><br></pre></td></tr></table></figure><h5 id="Mac的安装命令："><a href="#Mac的安装命令：" class="headerlink" title="Mac的安装命令："></a>Mac的安装命令：</h5><ul><li>通过Homebrew：    <code>brew install yarn</code>  </li><li>通过Port：    <code>sudo port install yarn</code></li></ul><h5 id="安装完成后执行yarn-version即可查看版本信息。"><a href="#安装完成后执行yarn-version即可查看版本信息。" class="headerlink" title="安装完成后执行yarn --version即可查看版本信息。"></a>安装完成后执行<code>yarn --version</code>即可查看版本信息。</h5><h5 id="然后用yarn命令代替npm即可。"><a href="#然后用yarn命令代替npm即可。" class="headerlink" title="然后用yarn命令代替npm即可。"></a>然后用yarn命令代替npm即可。</h5><h5 id="原命令"><a href="#原命令" class="headerlink" title="原命令:"></a>原命令:</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><h5 id="现命令：-1"><a href="#现命令：-1" class="headerlink" title="现命令："></a>现命令：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn//连install和i都省了😁</span><br></pre></td></tr></table></figure><h4 id="yarn小技巧："><a href="#yarn小技巧：" class="headerlink" title="yarn小技巧："></a>yarn小技巧：</h4><h5 id="用淘宝的源替换yarn的官方源："><a href="#用淘宝的源替换yarn的官方源：" class="headerlink" title="用淘宝的源替换yarn的官方源："></a>用淘宝的源替换yarn的官方源：</h5><h5 id="执行yarn-config-get-registry我们可以发现yarn的官方源是https-registry-yarnpkg-com，我们执行yarn-config-set-registry-https-registry-npm-taobao-org。这样一来yarn安装依赖的速度会快很多。"><a href="#执行yarn-config-get-registry我们可以发现yarn的官方源是https-registry-yarnpkg-com，我们执行yarn-config-set-registry-https-registry-npm-taobao-org。这样一来yarn安装依赖的速度会快很多。" class="headerlink" title="执行yarn config get registry我们可以发现yarn的官方源是https://registry.yarnpkg.com，我们执行yarn config set registry https://registry.npm.taobao.org。这样一来yarn安装依赖的速度会快很多。"></a>执行<code>yarn config get registry</code>我们可以发现yarn的官方源是<strong><a href="https://registry.yarnpkg.com" target="_blank" rel="noopener">https://registry.yarnpkg.com</a></strong>，我们执行<code>yarn config set registry https://registry.npm.taobao.org</code>。这样一来yarn安装依赖的速度会快很多。</h5><h1 id="Node小技巧"><a href="#Node小技巧" class="headerlink" title="Node小技巧"></a>Node小技巧</h1><p>有时候我需要搭建一个静态文件服务器来查看html网页或者文件，这时候如果去配置Nginx的话不免有些大材小用，这时候一个简单的node文件就可以解决，新建文件，文件内容如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> connect = <span class="built_in">require</span>(<span class="string">"connect"</span>);</span><br><span class="line"><span class="keyword">var</span> serveStatic = <span class="built_in">require</span>(<span class="string">"serve-static"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = connect();</span><br><span class="line">app.use(serveStatic(<span class="string">"/home/yourname/node/demo/dist"</span>));<span class="comment">//静态文件目录</span></span><br><span class="line">app.listen(<span class="number">5000</span>);<span class="comment">//端口</span></span><br></pre></td></tr></table></figure><p>保存为httpserver.js，执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cnpm install connect serve-static</span><br><span class="line">node httpserver.js</span><br></pre></td></tr></table></figure><p>这时候打开网页，访问<a href="http://localhost:5000" target="_blank" rel="noopener">http://localhost:5000</a> 即可。</p>]]></content>
      
      
      <categories>
          
          <category> Node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node,npm,cnpm,yarn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker环境搭建</title>
      <link href="/2018/07/20/Docker%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
      <url>/2018/07/20/Docker%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><h5 id="相信不管你是刚踏入互联网圈，还是已经摸爬滚打了几年，你一定听说过容器技术。但是要说当下最火的容器技术是什么，技术人员一定异口同声的回答-”Docker“。"><a href="#相信不管你是刚踏入互联网圈，还是已经摸爬滚打了几年，你一定听说过容器技术。但是要说当下最火的容器技术是什么，技术人员一定异口同声的回答-”Docker“。" class="headerlink" title="相信不管你是刚踏入互联网圈，还是已经摸爬滚打了几年，你一定听说过容器技术。但是要说当下最火的容器技术是什么，技术人员一定异口同声的回答:”Docker“。"></a>相信不管你是刚踏入互联网圈，还是已经摸爬滚打了几年，你一定听说过容器技术。但是要说当下最火的容器技术是什么，技术人员一定异口同声的回答:”<strong><em>Docker</em></strong>“。</h5><h5 id="什么样的技术人员适合学Docker呢？我认为后端同学和对新技术敏感的同学最合适，这样才能跟得上技术的潮流，使自己不被淘汰。当然正在上学的学生学习Docker对自己找实习机会和找工作也会十分有利的，毕竟技多不压身。"><a href="#什么样的技术人员适合学Docker呢？我认为后端同学和对新技术敏感的同学最合适，这样才能跟得上技术的潮流，使自己不被淘汰。当然正在上学的学生学习Docker对自己找实习机会和找工作也会十分有利的，毕竟技多不压身。" class="headerlink" title="什么样的技术人员适合学Docker呢？我认为后端同学和对新技术敏感的同学最合适，这样才能跟得上技术的潮流，使自己不被淘汰。当然正在上学的学生学习Docker对自己找实习机会和找工作也会十分有利的，毕竟技多不压身。"></a>什么样的技术人员适合学Docker呢？我认为后端同学和对新技术敏感的同学最合适，这样才能跟得上技术的潮流，使自己不被淘汰。当然正在上学的学生学习Docker对自己找实习机会和找工作也会十分有利的，毕竟技多不压身。</h5><h5 id="关于的Docker的详细介绍在网上已经多得不能再多了，大家只要百度或者Google一下就能获取到大量的资料，所以我就不在这详细介绍了，下面我就说下我在工作中为什么会选择Docker："><a href="#关于的Docker的详细介绍在网上已经多得不能再多了，大家只要百度或者Google一下就能获取到大量的资料，所以我就不在这详细介绍了，下面我就说下我在工作中为什么会选择Docker：" class="headerlink" title="关于的Docker的详细介绍在网上已经多得不能再多了，大家只要百度或者Google一下就能获取到大量的资料，所以我就不在这详细介绍了，下面我就说下我在工作中为什么会选择Docker："></a>关于的Docker的详细介绍在网上已经多得不能再多了，大家只要百度或者Google一下就能获取到大量的资料，所以我就不在这详细介绍了，下面我就说下我在工作中为什么会选择Docker：</h5><ul><li><strong>方便部署、交付、迁移、测试，总结起来就是方便持续集成持续交付部署。</strong></li><li><strong>启动迅速，秒级的启动速度远远胜过了虚拟机，启动后占用的系统资源也更少。</strong></li></ul><h1 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h1><h3 id="场景1"><a href="#场景1" class="headerlink" title="场景1"></a>场景1</h3><h5 id="还记得上学的时候，学习新语言的第一天老师总会教大家如何搭建环境。比如在安装Mysql的时候，学校机房的电脑，你自己的笔记本，再加上各种不一样的Windows版本，不同的Linux发行版，总是让学生出现各种各样的问题。"><a href="#还记得上学的时候，学习新语言的第一天老师总会教大家如何搭建环境。比如在安装Mysql的时候，学校机房的电脑，你自己的笔记本，再加上各种不一样的Windows版本，不同的Linux发行版，总是让学生出现各种各样的问题。" class="headerlink" title="还记得上学的时候，学习新语言的第一天老师总会教大家如何搭建环境。比如在安装Mysql的时候，学校机房的电脑，你自己的笔记本，再加上各种不一样的Windows版本，不同的Linux发行版，总是让学生出现各种各样的问题。"></a>还记得上学的时候，学习新语言的第一天老师总会教大家如何搭建环境。比如在安装Mysql的时候，学校机房的电脑，你自己的笔记本，再加上各种不一样的Windows版本，不同的Linux发行版，总是让学生出现各种各样的问题。</h5><h5 id="如果那时候Docker存在的话就轻松解决了这个问题，我只要安装好Docker，然后执行下"><a href="#如果那时候Docker存在的话就轻松解决了这个问题，我只要安装好Docker，然后执行下" class="headerlink" title="如果那时候Docker存在的话就轻松解决了这个问题，我只要安装好Docker，然后执行下"></a>如果那时候Docker存在的话就轻松解决了这个问题，我只要安装好Docker，然后执行下</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql</span><br><span class="line">docker run -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span><br></pre></td></tr></table></figure><h5 id="好了，一个root密码为123456的mysql服务就这样搭建好了，最多出现端口占用的问题，换个端口在执行一次即可。"><a href="#好了，一个root密码为123456的mysql服务就这样搭建好了，最多出现端口占用的问题，换个端口在执行一次即可。" class="headerlink" title="好了，一个root密码为123456的mysql服务就这样搭建好了，最多出现端口占用的问题，换个端口在执行一次即可。"></a>好了，一个root密码为123456的mysql服务就这样搭建好了，最多出现端口占用的问题，换个端口在执行一次即可。</h5><hr><h5 id="假如你现在需要跑某个开源的Demo，但是这个Demo使用的数据库你的电脑没有安装，。以PostgreSQL为例，这时候你只要执行下"><a href="#假如你现在需要跑某个开源的Demo，但是这个Demo使用的数据库你的电脑没有安装，。以PostgreSQL为例，这时候你只要执行下" class="headerlink" title="假如你现在需要跑某个开源的Demo，但是这个Demo使用的数据库你的电脑没有安装，。以PostgreSQL为例，这时候你只要执行下"></a>假如你现在需要跑某个开源的Demo，但是这个Demo使用的数据库你的电脑没有安装，。以<strong>PostgreSQL</strong>为例，这时候你只要执行下</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull postgres</span><br><span class="line">docker run -p 5432:5432 -e POSTGRES_PASSWORD=123456 -d postgres</span><br></pre></td></tr></table></figure><h5 id="一个密码为123456，端口为5432的postgres服务就有了。"><a href="#一个密码为123456，端口为5432的postgres服务就有了。" class="headerlink" title="一个密码为123456，端口为5432的postgres服务就有了。"></a>一个密码为123456，端口为5432的postgres服务就有了。</h5><h5 id="当然你还可以指定各种版本，这样就相当于在电脑或服务器中装了多个版本的服务。"><a href="#当然你还可以指定各种版本，这样就相当于在电脑或服务器中装了多个版本的服务。" class="headerlink" title="当然你还可以指定各种版本，这样就相当于在电脑或服务器中装了多个版本的服务。"></a>当然你还可以指定各种版本，这样就相当于在电脑或服务器中装了多个版本的服务。</h5><h3 id="场景3"><a href="#场景3" class="headerlink" title="场景3"></a>场景3</h3><h5 id="现在后端最火的技术当属微服务了。以电商项目为例，在商促期间访问压力大的模块都在秒杀上，这时候如果我们采用了Docker镜像来部署，只需要重新启动一个或者多个秒杀模块就解决了问题，在商促结束后停止掉额外启动的秒杀模块，这样就达到了弹性伸缩的目的，节省了服务器的资源。"><a href="#现在后端最火的技术当属微服务了。以电商项目为例，在商促期间访问压力大的模块都在秒杀上，这时候如果我们采用了Docker镜像来部署，只需要重新启动一个或者多个秒杀模块就解决了问题，在商促结束后停止掉额外启动的秒杀模块，这样就达到了弹性伸缩的目的，节省了服务器的资源。" class="headerlink" title="现在后端最火的技术当属微服务了。以电商项目为例，在商促期间访问压力大的模块都在秒杀上，这时候如果我们采用了Docker镜像来部署，只需要重新启动一个或者多个秒杀模块就解决了问题，在商促结束后停止掉额外启动的秒杀模块，这样就达到了弹性伸缩的目的，节省了服务器的资源。"></a>现在后端最火的技术当属<a href="https://baike.baidu.com/item/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84/18705784?fr=aladdin" target="_blank" rel="noopener">微服务</a>了。以电商项目为例，在商促期间访问压力大的模块都在秒杀上，这时候如果我们采用了Docker镜像来部署，只需要重新启动一个或者多个秒杀模块就解决了问题，在商促结束后停止掉额外启动的秒杀模块，这样就达到了弹性伸缩的目的，节省了服务器的资源。</h5><h1 id="安装Docker官网文档"><a href="#安装Docker官网文档" class="headerlink" title="安装Docker官网文档"></a>安装Docker<a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/#docker-ee-customers" target="_blank" rel="noopener">官网文档</a></h1><h5 id="因为我家里的服务器使用ESXi跑着一个Ubuntu的实例，我就以Ubuntu为例子"><a href="#因为我家里的服务器使用ESXi跑着一个Ubuntu的实例，我就以Ubuntu为例子" class="headerlink" title="因为我家里的服务器使用ESXi跑着一个Ubuntu的实例，我就以Ubuntu为例子"></a>因为我家里的服务器使用ESXi跑着一个Ubuntu的实例，我就以Ubuntu为例子</h5><ol><li><p>更新安装源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure></li><li><p>安装依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    software-properties-common</span><br></pre></td></tr></table></figure></li><li><p>添加GPG key</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure></li><li><p>验证GPG key</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-key fingerprint 0EBFCD88</span><br></pre></td></tr></table></figure></li><li><p>添加官方源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository \</span><br><span class="line">   <span class="string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">   <span class="variable">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">   stable"</span></span><br></pre></td></tr></table></figure></li><li><p>再次更新安装源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure></li><li><p>安装docker-ce</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install docker-ce</span><br></pre></td></tr></table></figure></li><li><p>运行hello-world</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run hello-world</span><br></pre></td></tr></table></figure></li><li><p>如果屏幕上出现了 “<strong>Hello from Docker!</strong>“ 字样，恭喜你，安装成功。</p><p>如果你以为到了这一步就完事的话，那你真是图样图森破了，由于一些大家都懂得的原因，在国内访问外网的Docker Hub并没有什么速度，好在国内有加速镜像可以配置。我使用的是<a href="https://www.daocloud.io/" target="_blank" rel="noopener">DaoCloud</a>，在这个网站注册后打开<a href="https://www.daocloud.io/mirror#accelerator-doc" target="_blank" rel="noopener">加速镜像的链接</a>，执行网页上给的命令即可。至此，Docker的安装和配置加速镜像就彻底结束了。</p></li></ol><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><h5 id="今天仅仅是介绍了如何安装Docker和配置加速器，后面我还会分享一些Docker在具体项目中应用，敬请期待。"><a href="#今天仅仅是介绍了如何安装Docker和配置加速器，后面我还会分享一些Docker在具体项目中应用，敬请期待。" class="headerlink" title="今天仅仅是介绍了如何安装Docker和配置加速器，后面我还会分享一些Docker在具体项目中应用，敬请期待。"></a>今天仅仅是介绍了如何安装Docker和配置加速器，后面我还会分享一些Docker在具体项目中应用，敬请期待。</h5>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello Go!</title>
      <link href="/2018/07/19/Hello%20Go/"/>
      <url>/2018/07/19/Hello%20Go/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><h5 id="要说当下什么语言最火，coder们自然而然就想到了Google爸爸推出的语言Go。"><a href="#要说当下什么语言最火，coder们自然而然就想到了Google爸爸推出的语言Go。" class="headerlink" title="要说当下什么语言最火，coder们自然而然就想到了Google爸爸推出的语言Go。"></a>要说当下什么语言最火，coder们自然而然就想到了Google爸爸推出的语言Go。</h5><h1 id="关于Go-官网链接"><a href="#关于Go-官网链接" class="headerlink" title="关于Go 官网链接"></a>关于Go <a href="https://golang.org/" target="_blank" rel="noopener">官网链接</a></h1><h5 id="Go是一种新的语言，一种并发的、带垃圾回收的、快速编译的语言。它具有以下特点："><a href="#Go是一种新的语言，一种并发的、带垃圾回收的、快速编译的语言。它具有以下特点：" class="headerlink" title="Go是一种新的语言，一种并发的、带垃圾回收的、快速编译的语言。它具有以下特点："></a>Go是一种新的语言，一种并发的、带垃圾回收的、快速编译的语言。它具有以下特点：</h5><ul><li><p><strong>它可以在一台计算机上用几秒钟的时间编译一个大型的Go程序。</strong></p></li><li><p><strong>Go为软件构造提供了一种模型，它使依赖分析更加容易，且避免了大部分C风格include文件与库的开头。</strong></p></li><li><p><strong>Go是静态类型的语言，它的类型系统没有层级。因此用户不需要在定义类型之间的关系上花费时间，这样感觉起来比典型的面向对象语言更轻量级。</strong></p></li><li><p><strong>Go完全是垃圾回收型的语言，并为并发执行与通信提供了基本的支持。按照其设计，Go打算为多核机器上系统软件的构造提供一种方法。</strong></p></li></ul><h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h1><h5 id="由于我使用的是MacBook，所以我就以MacBook为例进行环境搭建，Linux应该是差不多的步骤。"><a href="#由于我使用的是MacBook，所以我就以MacBook为例进行环境搭建，Linux应该是差不多的步骤。" class="headerlink" title="由于我使用的是MacBook，所以我就以MacBook为例进行环境搭建，Linux应该是差不多的步骤。"></a>由于我使用的是MacBook，所以我就以MacBook为例进行环境搭建，Linux应该是差不多的步骤。</h5><p><strong>打开<a href="https://golang.org/dl/" target="_blank" rel="noopener">此链接</a>，选择对于的平台的版本，我选择的是go1.10.3.darwin-amd64.tar.gz</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://dl.google.com/go/go1.10.3.darwin-amd64.tar.gz</span><br></pre></td></tr></table></figure><p><strong>下载后解压到 /usr/local 目录下</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -C /usr/<span class="built_in">local</span> -xvf go1.10.3.darwin-amd64.tar.gz</span><br></pre></td></tr></table></figure><p><strong>配置环境变量，可以在/etc/profile处或者~/bashrc处以及~/zshrc处编辑</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GO_HOME=<span class="string">"/usr/local/go"</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">"<span class="variable">$GO_HOME</span>/bin"</span></span><br></pre></td></tr></table></figure><p><strong>然后source &lt;你配置环境变量的地方&gt;，在命令行下执行go，有返回即是环境搭建完毕。</strong></p><h1 id="运行你的第一个Go语言程序"><a href="#运行你的第一个Go语言程序" class="headerlink" title="运行你的第一个Go语言程序"></a>运行你的第一个Go语言程序</h1><p><strong>打开vscode或者sublime编辑器，输入以下代码，保存为helloworld.go</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">"Hello, Go"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>然后执行下面的命令</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> run helloworld.<span class="keyword">go</span></span><br></pre></td></tr></table></figure><p><strong>至此，你的第一个Go语言程序就完成了。</strong> </p>]]></content>
      
      
      <categories>
          
          <category> Go </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Go </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>about</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[<h1 id="关于我"><a href="#关于我" class="headerlink" title="关于我"></a>关于我</h1><h3 id="个人简介"><a href="#个人简介" class="headerlink" title="个人简介"></a>个人简介</h3><ul><li><p><strong>一枚生命不息，折腾不止的程序猿。</strong></p></li><li><p><strong>现在主要从事Java Web，Android，Devops工作。</strong></p></li><li><p><strong>崇尚万物基于Linux。</strong></p></li><li><p><strong>热爱互联网，热爱编程，喜欢挑战新技术。</strong></p></li></ul><h3 id="工作技能树"><a href="#工作技能树" class="headerlink" title="工作技能树"></a>工作技能树</h3><ul><li><strong>Android</strong><ul><li><strong>GPS</strong></li><li><strong>LBS</strong></li><li><strong>电商</strong></li><li><strong>即时通讯</strong></li><li><strong>支付(微信，支付宝)</strong></li><li><strong>Hybrid混合开发</strong></li><li><strong>反编译</strong></li><li><strong>Kotlin</strong></li><li><strong>RxAndroid</strong></li><li><strong>Flutter</strong></li></ul></li><li><strong>Java Web</strong>  <ul><li><strong>Spring Boot </strong></li><li><strong>Spring Cloud微服务全家桶 </strong></li><li><strong>Restful</strong></li><li><strong>Http</strong></li><li><strong>MyBatis</strong> </li><li><strong>Api 加密</strong></li><li><strong>POI文档处理</strong></li><li><strong>数据库</strong></li><li><strong>微信公众号开发</strong></li><li><strong>fastdfs</strong></li><li><strong>MQ(RabbitMQ，Kafka)</strong></li></ul></li><li><strong>大数据</strong> <ul><li><strong>Flink</strong></li></ul></li><li><strong>Devops</strong> <ul><li><strong>Linux </strong><ul><li><strong>日常维护</strong></li><li><strong>各语言环境搭建</strong></li><li><strong>Shell脚本</strong></li><li><strong>Nginx</strong></li></ul></li><li><strong>Github  , GitLab </strong><ul><li><strong>通过WebHook实现持续集成</strong></li></ul></li><li><strong>Jenkins</strong><ul><li><strong>Android自动构建</strong></li><li><strong>iOS自动构建</strong></li><li><strong>Web自动构建</strong></li></ul></li><li><strong>Docker</strong> <ul><li><strong>Dockerfile编写</strong></li><li><strong>Docker-Compose服务编排</strong></li><li><strong>私有仓库搭建</strong></li><li><strong>kubernetes(k8s)以及服务编排</strong></li></ul></li><li><strong>Jira</strong> <ul><li><strong>基于Scrum的敏捷开发管理</strong></li></ul></li><li><strong>SonarQube</strong> <ul><li><strong>静态代码检查</strong></li></ul></li><li><strong>ELK</strong><ul><li><strong>日志搜集分析</strong></li></ul></li></ul></li><li><strong>Others</strong> <ul><li><strong>Quantumult X脚本 </strong></li><li><strong>Surge脚本</strong></li><li><strong>JSBox脚本</strong></li><li><strong>油猴脚本</strong></li></ul></li></ul><h3 id="生活技能树"><a href="#生活技能树" class="headerlink" title="生活技能树"></a>生活技能树</h3><ul><li><p><strong>服务器(我个人在家里维护了一台7*24小时的HP Gen8服务器)</strong></p><ul><li><strong>虚拟化(ESXi，Proxmox VE)</strong><ul><li><strong>HomeLab</strong></li><li><strong>Ubuntu</strong></li><li><strong>Centos</strong></li><li><strong>NAS(主要用来混PT和配合玩影音😁)</strong></li><li><strong>软路由(iKuai，OpenWRT)</strong></li></ul></li></ul></li><li><p><strong>路由器</strong></p><ul><li><strong>固件编译，烧录</strong></li><li><strong>去广告</strong></li></ul></li><li><p><strong>树莓派</strong></p><ul><li><strong>游戏系统</strong></li><li><strong>Kodi</strong></li><li><strong>基于GPIO红外线收发模块实现万能遥控(DIY物联网家电操作的基石😁)</strong></li><li><strong>NAS(现已迁移到服务器)</strong></li><li><strong>HomeBridge(通过Siri控制家里的智能设备，包括灯和各种电器)</strong></li></ul></li><li><p><strong>X讯N1</strong></p><ul><li><strong>电视盒子</strong></li><li><strong>OpenWrt旁路由</strong></li><li><strong>Armbian</strong></li></ul></li><li><p><strong>有待挖掘的设备</strong></p><ul><li><p><strong>天猫精灵(配合博联网关实现控制传统家用电器和开关，设备太贵了，后期慢慢补充，现已完成Hass对接)</strong></p></li><li><p><strong>小爱同学(超全曲库的哄娃神器，控制小米系智能家居)</strong></p></li><li><p><strong>Apple TV 4K(作为HomeKit智能家居网关，目前我只是它来Air Play)</strong></p></li><li><p><strong>Nvidia Shield TV(宇宙最强安卓盒子，Plex)</strong></p></li></ul></li></ul><h3 id="联系方式"><a href="#联系方式" class="headerlink" title="联系方式"></a>联系方式</h3><ul><li>邮箱：<a href="mailto:leezheng0815@gmail.com" target="_blank" rel="noopener">leezheng0815@gmail.com</a></li></ul>]]></content>
      
    </entry>
    
    
  
</search>
